2025-03-20 00:46:11 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 00:46:11 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 00:46:11 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 00:46:38 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 5636 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 00:46:38 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 00:46:38 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 00:46:39 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 00:46:40 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 67 ms. Found 3 JPA repository interfaces.
2025-03-20 00:46:40 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8081 (http)
2025-03-20 00:46:40 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-03-20 00:46:40 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 00:46:40 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 00:46:40 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 00:46:40 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1869 ms
2025-03-20 00:46:40 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 00:46:41 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 00:46:41 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 00:46:41 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 00:46:41 INFO  tech.robd.jwt.util.JwtTokenUtil - JWT secret key loaded from file successfully
2025-03-20 00:46:41 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 00:46:41 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 00:46:41 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 00:46:41 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 00:46:41 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 00:46:41 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 00:46:42 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 00:46:42 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 00:46:43 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 00:46:43 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 00:46:43 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 00:46:43 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 00:46:43 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 00:46:43 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 00:46:43 INFO  t.r.jwt.service.DatabaseInitService - Initializing database with domains, roles and users from configuration
2025-03-20 00:46:43 DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public abstract java.util.Optional tech.robd.jwt.repository.DomainRepository.findByName(java.lang.String); target is of class [jdk.proxy2.$Proxy133]
2025-03-20 00:46:43 DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public abstract java.util.Optional tech.robd.jwt.repository.DomainRepository.findByName(java.lang.String); target is of class [jdk.proxy2.$Proxy133] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@4ef0bc5b and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=@domainChecker.isInAuthDomain(#domain) and hasRole('ADMIN')]
2025-03-20 00:46:43 WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'databaseInitService': Invocation of init method failed
2025-03-20 00:46:43 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 00:46:43 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 00:46:43 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 00:46:43 INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-03-20 00:46:43 INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-03-20 00:46:43 ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'databaseInitService': Invocation of init method failed
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:222)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:419)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1762)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:942)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:312)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)
	at tech.robd.jwt.JwtAuthApplication.main(JwtAuthApplication.java:46)
Caused by: org.springframework.security.access.AccessDeniedException: Access Denied
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:257)
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:198)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:244)
	at jdk.proxy2/jdk.proxy2.$Proxy133.findByName(Unknown Source)
	at tech.robd.jwt.service.DatabaseInitService.createConfiguredDomains(DatabaseInitService.java:73)
	at tech.robd.jwt.service.DatabaseInitService.initialize(DatabaseInitService.java:55)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMethod.invoke(InitDestroyAnnotationBeanPostProcessor.java:457)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:401)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:219)
	... 18 common frames omitted
2025-03-20 01:03:29 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 20356 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 01:03:29 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 01:03:29 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 01:03:31 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 01:03:31 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 99 ms. Found 6 JPA repository interfaces.
2025-03-20 01:03:31 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8081 (http)
2025-03-20 01:03:31 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-03-20 01:03:31 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 01:03:31 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 01:03:32 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 01:03:32 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2063 ms
2025-03-20 01:03:32 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 01:03:32 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 01:03:32 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 01:03:32 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 01:03:32 INFO  tech.robd.jwt.util.JwtTokenUtil - JWT secret key loaded from file successfully
2025-03-20 01:03:32 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 01:03:32 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 01:03:32 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 01:03:32 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 01:03:32 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 01:03:32 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 01:03:33 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 01:03:34 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 01:03:34 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 01:03:34 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 01:03:34 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 01:03:34 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 01:03:34 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 01:03:34 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 01:03:34 INFO  t.r.jwt.service.DatabaseInitService - Initializing database with domains, roles and users from configuration
2025-03-20 01:03:34 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "d479d" for domain: auth
2025-03-20 01:03:34 WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'databaseInitService': Invocation of init method failed
2025-03-20 01:03:34 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 01:03:34 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 01:03:34 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 01:03:34 INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-03-20 01:03:34 INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-03-20 01:03:34 ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'databaseInitService': Invocation of init method failed
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:222)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:419)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1762)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:942)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:312)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)
	at tech.robd.jwt.JwtAuthApplication.main(JwtAuthApplication.java:46)
Caused by: org.springframework.dao.DataIntegrityViolationException: not-null property references a null or transient value : tech.robd.jwt.entity.Domain.displayName
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:286)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:229)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:244)
	at jdk.proxy2/jdk.proxy2.$Proxy135.save(Unknown Source)
	at tech.robd.jwt.service.DatabaseInitService.createConfiguredDomains(DatabaseInitService.java:80)
	at tech.robd.jwt.service.DatabaseInitService.initialize(DatabaseInitService.java:55)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMethod.invoke(InitDestroyAnnotationBeanPostProcessor.java:457)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:401)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:219)
	... 18 common frames omitted
Caused by: org.hibernate.PropertyValueException: not-null property references a null or transient value : tech.robd.jwt.entity.Domain.displayName
	at org.hibernate.engine.internal.Nullability.checkNullability(Nullability.java:109)
	at org.hibernate.engine.internal.Nullability.checkNullability(Nullability.java:54)
	at org.hibernate.action.internal.AbstractEntityInsertAction.nullifyTransientReferencesIfNotAlready(AbstractEntityInsertAction.java:124)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:69)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:674)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:291)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:272)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:322)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:363)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:277)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:180)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:140)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:175)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:93)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:77)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:54)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:755)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:739)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at jdk.proxy2/jdk.proxy2.$Proxy127.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:617)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:288)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:168)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 32 common frames omitted
2025-03-20 09:09:36 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 34632 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 09:09:36 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 09:09:36 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 09:09:37 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 09:09:37 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 119 ms. Found 6 JPA repository interfaces.
2025-03-20 09:09:38 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8081 (http)
2025-03-20 09:09:38 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-03-20 09:09:38 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 09:09:38 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 09:09:38 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 09:09:38 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2340 ms
2025-03-20 09:09:38 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 09:09:38 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 09:09:38 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 09:09:38 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 09:09:38 INFO  tech.robd.jwt.util.JwtTokenUtil - JWT secret key loaded from file successfully
2025-03-20 09:09:39 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 09:09:39 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 09:09:39 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 09:09:39 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 09:09:39 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 09:09:39 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 09:09:39 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 09:09:40 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 09:09:40 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 09:09:40 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 09:09:40 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 09:09:40 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 09:09:40 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 09:09:40 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 09:09:41 INFO  t.r.jwt.service.DatabaseInitService - Initializing database with domains, roles and users from configuration
2025-03-20 09:09:41 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "abf28" for domain: auth
2025-03-20 09:09:41 WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'databaseInitService': Invocation of init method failed
2025-03-20 09:09:41 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 09:09:41 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 09:09:41 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 09:09:41 INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-03-20 09:09:41 INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-03-20 09:09:41 ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'databaseInitService': Invocation of init method failed
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:222)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:419)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1762)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:942)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:312)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)
	at tech.robd.jwt.JwtAuthApplication.main(JwtAuthApplication.java:46)
Caused by: org.springframework.dao.DataIntegrityViolationException: not-null property references a null or transient value : tech.robd.jwt.entity.Domain.displayName
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:286)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:229)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:244)
	at jdk.proxy2/jdk.proxy2.$Proxy135.save(Unknown Source)
	at tech.robd.jwt.service.DatabaseInitService.createConfiguredDomains(DatabaseInitService.java:81)
	at tech.robd.jwt.service.DatabaseInitService.initialize(DatabaseInitService.java:55)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMethod.invoke(InitDestroyAnnotationBeanPostProcessor.java:457)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:401)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:219)
	... 18 common frames omitted
Caused by: org.hibernate.PropertyValueException: not-null property references a null or transient value : tech.robd.jwt.entity.Domain.displayName
	at org.hibernate.engine.internal.Nullability.checkNullability(Nullability.java:109)
	at org.hibernate.engine.internal.Nullability.checkNullability(Nullability.java:54)
	at org.hibernate.action.internal.AbstractEntityInsertAction.nullifyTransientReferencesIfNotAlready(AbstractEntityInsertAction.java:124)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:69)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:674)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:291)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:272)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:322)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:363)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:277)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:180)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:140)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:175)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:93)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:77)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:54)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:755)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:739)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at jdk.proxy2/jdk.proxy2.$Proxy127.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:617)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:288)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:168)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 32 common frames omitted
2025-03-20 09:25:34 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 28020 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 09:25:34 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 09:25:34 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 09:25:35 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 09:25:35 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 84 ms. Found 6 JPA repository interfaces.
2025-03-20 09:25:36 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8081 (http)
2025-03-20 09:25:36 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-03-20 09:25:36 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 09:25:36 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 09:25:36 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 09:25:36 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2085 ms
2025-03-20 09:25:36 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 09:25:37 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 09:25:37 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 09:25:37 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 09:25:37 INFO  tech.robd.jwt.util.JwtTokenUtil - JWT secret key loaded from file successfully
2025-03-20 09:25:37 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 09:25:37 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 09:25:37 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 09:25:37 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 09:25:37 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 09:25:37 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 09:25:38 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 09:25:39 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 09:25:39 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 09:25:39 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 09:25:39 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 09:25:39 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 09:25:39 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 09:25:39 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 09:25:39 INFO  t.r.jwt.service.DatabaseInitService - Initializing database with domains, roles and users from configuration
2025-03-20 09:25:40 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "df7e9" for domain: auth
2025-03-20 09:25:40 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: auth
2025-03-20 09:25:40 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "a18df" for domain: null
2025-03-20 09:25:40 WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'databaseInitService': Invocation of init method failed
2025-03-20 09:25:40 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 09:25:40 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 09:25:40 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 09:25:40 INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-03-20 09:25:40 INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-03-20 09:25:40 ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'databaseInitService': Invocation of init method failed
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:222)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:419)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1762)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:942)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:312)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)
	at tech.robd.jwt.JwtAuthApplication.main(JwtAuthApplication.java:46)
Caused by: org.springframework.dao.DataIntegrityViolationException: not-null property references a null or transient value : tech.robd.jwt.entity.Domain.name
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:286)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:229)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:244)
	at jdk.proxy2/jdk.proxy2.$Proxy135.save(Unknown Source)
	at tech.robd.jwt.service.DatabaseInitService.createConfiguredDomains(DatabaseInitService.java:81)
	at tech.robd.jwt.service.DatabaseInitService.initialize(DatabaseInitService.java:55)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMethod.invoke(InitDestroyAnnotationBeanPostProcessor.java:457)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:401)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:219)
	... 18 common frames omitted
Caused by: org.hibernate.PropertyValueException: not-null property references a null or transient value : tech.robd.jwt.entity.Domain.name
	at org.hibernate.engine.internal.Nullability.checkNullability(Nullability.java:109)
	at org.hibernate.engine.internal.Nullability.checkNullability(Nullability.java:54)
	at org.hibernate.action.internal.AbstractEntityInsertAction.nullifyTransientReferencesIfNotAlready(AbstractEntityInsertAction.java:124)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:69)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:674)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:291)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:272)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:322)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:363)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:277)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:180)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:140)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:175)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:93)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:77)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:54)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:755)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:739)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at jdk.proxy2/jdk.proxy2.$Proxy127.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:617)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:288)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:168)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 32 common frames omitted
2025-03-20 09:27:57 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 14404 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 09:27:57 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 09:27:57 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 09:27:58 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 09:27:58 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 127 ms. Found 6 JPA repository interfaces.
2025-03-20 09:27:59 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8081 (http)
2025-03-20 09:27:59 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-03-20 09:27:59 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 09:27:59 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 09:27:59 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 09:27:59 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2202 ms
2025-03-20 09:28:00 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 09:28:00 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 09:28:00 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 09:28:00 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 09:28:01 INFO  tech.robd.jwt.util.JwtTokenUtil - JWT secret key loaded from file successfully
2025-03-20 09:28:01 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 09:28:01 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 09:28:01 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 09:28:01 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 09:28:02 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 09:28:02 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 09:28:03 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 09:28:05 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 09:28:05 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 09:28:05 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 09:28:05 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 09:28:05 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 09:28:05 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 09:28:05 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 09:28:06 INFO  t.r.jwt.service.DatabaseInitService - Initializing database with domains, roles and users from configuration
2025-03-20 09:28:06 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "e1eb1" for domain: auth
2025-03-20 09:29:30 WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m29s601ms405s900ns).
2025-03-20 09:29:30 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: auth
2025-03-20 09:29:30 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "25721" for domain: null
2025-03-20 09:29:39 WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'databaseInitService': Invocation of init method failed
2025-03-20 09:29:39 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 09:29:39 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 09:29:39 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 09:29:39 INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-03-20 09:29:39 INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-03-20 09:29:39 ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'databaseInitService': Invocation of init method failed
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:222)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:419)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1762)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:942)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:312)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)
	at tech.robd.jwt.JwtAuthApplication.main(JwtAuthApplication.java:46)
Caused by: org.springframework.dao.DataIntegrityViolationException: not-null property references a null or transient value : tech.robd.jwt.entity.Domain.name
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:286)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:229)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:244)
	at jdk.proxy2/jdk.proxy2.$Proxy135.save(Unknown Source)
	at tech.robd.jwt.service.DatabaseInitService.createConfiguredDomains(DatabaseInitService.java:81)
	at tech.robd.jwt.service.DatabaseInitService.initialize(DatabaseInitService.java:55)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMethod.invoke(InitDestroyAnnotationBeanPostProcessor.java:457)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:401)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:219)
	... 18 common frames omitted
Caused by: org.hibernate.PropertyValueException: not-null property references a null or transient value : tech.robd.jwt.entity.Domain.name
	at org.hibernate.engine.internal.Nullability.checkNullability(Nullability.java:109)
	at org.hibernate.engine.internal.Nullability.checkNullability(Nullability.java:54)
	at org.hibernate.action.internal.AbstractEntityInsertAction.nullifyTransientReferencesIfNotAlready(AbstractEntityInsertAction.java:124)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:69)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:674)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:291)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:272)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:322)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:363)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:277)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:180)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:140)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:175)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:93)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:77)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:54)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:755)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:739)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at jdk.proxy2/jdk.proxy2.$Proxy127.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:617)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:288)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:168)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 32 common frames omitted
2025-03-20 09:30:09 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 36172 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 09:30:09 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 09:30:09 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 09:30:10 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 09:30:10 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 87 ms. Found 6 JPA repository interfaces.
2025-03-20 09:30:12 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8081 (http)
2025-03-20 09:30:12 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-03-20 09:30:12 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 09:30:12 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 09:30:12 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 09:30:12 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3475 ms
2025-03-20 09:30:12 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 09:30:13 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 09:30:13 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 09:30:13 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 09:30:14 INFO  tech.robd.jwt.util.JwtTokenUtil - JWT secret key loaded from file successfully
2025-03-20 09:30:14 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 09:30:15 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 09:30:15 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 09:30:15 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 09:30:16 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 09:30:16 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 09:30:17 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 09:30:19 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 09:30:19 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 09:30:19 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 09:30:19 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 09:30:19 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 09:30:19 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 09:30:19 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 09:30:20 INFO  t.r.jwt.service.DatabaseInitService - Initializing database with domains, roles and users from configuration
2025-03-20 09:30:20 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "0bb94" for domain: auth
2025-03-20 09:34:35 WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=4m21s921ms914s600ns).
2025-03-20 09:34:35 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: auth
2025-03-20 09:34:35 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "bd0d7" for domain: null
2025-03-20 09:34:35 WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'databaseInitService': Invocation of init method failed
2025-03-20 09:34:35 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 09:34:35 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 09:34:35 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 09:34:35 INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-03-20 09:34:35 INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-03-20 09:34:35 ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'databaseInitService': Invocation of init method failed
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:222)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:419)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1762)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:942)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:312)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)
	at tech.robd.jwt.JwtAuthApplication.main(JwtAuthApplication.java:46)
Caused by: org.springframework.dao.DataIntegrityViolationException: not-null property references a null or transient value : tech.robd.jwt.entity.Domain.name
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:286)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:229)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:244)
	at jdk.proxy2/jdk.proxy2.$Proxy135.save(Unknown Source)
	at tech.robd.jwt.service.DatabaseInitService.createConfiguredDomains(DatabaseInitService.java:81)
	at tech.robd.jwt.service.DatabaseInitService.initialize(DatabaseInitService.java:55)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMethod.invoke(InitDestroyAnnotationBeanPostProcessor.java:457)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:401)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:219)
	... 18 common frames omitted
Caused by: org.hibernate.PropertyValueException: not-null property references a null or transient value : tech.robd.jwt.entity.Domain.name
	at org.hibernate.engine.internal.Nullability.checkNullability(Nullability.java:109)
	at org.hibernate.engine.internal.Nullability.checkNullability(Nullability.java:54)
	at org.hibernate.action.internal.AbstractEntityInsertAction.nullifyTransientReferencesIfNotAlready(AbstractEntityInsertAction.java:124)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:69)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:674)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:291)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:272)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:322)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:363)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:277)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:180)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:140)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:175)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:93)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:77)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:54)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:755)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:739)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at jdk.proxy2/jdk.proxy2.$Proxy127.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:617)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:288)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:168)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 32 common frames omitted
2025-03-20 09:34:48 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 26848 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 09:34:48 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 09:34:48 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 09:34:49 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 09:34:50 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 86 ms. Found 6 JPA repository interfaces.
2025-03-20 09:34:50 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8081 (http)
2025-03-20 09:34:50 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-03-20 09:34:50 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 09:34:50 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 09:34:51 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 09:34:51 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2154 ms
2025-03-20 09:34:51 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 09:34:51 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 09:34:51 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 09:34:51 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 09:34:52 INFO  tech.robd.jwt.util.JwtTokenUtil - JWT secret key loaded from file successfully
2025-03-20 09:34:52 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 09:34:52 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 09:34:52 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 09:34:52 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 09:34:53 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 09:34:53 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 09:34:54 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 09:34:56 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 09:34:56 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 09:34:56 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 09:34:56 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 09:34:56 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 09:34:56 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 09:34:56 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 09:34:57 INFO  t.r.jwt.service.DatabaseInitService - Initializing database with domains, roles and users from configuration
2025-03-20 09:39:47 WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=4m56s256ms228s400ns).
2025-03-20 09:39:47 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "e8e4f" for domain: auth
2025-03-20 09:40:05 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: auth
2025-03-20 09:40:12 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "01785" for domain: null
2025-03-20 09:41:25 WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m37s958ms333s700ns).
2025-03-20 09:41:33 WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'databaseInitService': Invocation of init method failed
2025-03-20 09:41:33 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 09:41:33 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 09:41:33 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 09:41:33 INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-03-20 09:41:33 INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-03-20 09:41:33 ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'databaseInitService': Invocation of init method failed
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:222)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:419)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1762)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:942)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:312)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)
	at tech.robd.jwt.JwtAuthApplication.main(JwtAuthApplication.java:46)
Caused by: org.springframework.dao.DataIntegrityViolationException: not-null property references a null or transient value : tech.robd.jwt.entity.Domain.name
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:286)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:229)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:244)
	at jdk.proxy2/jdk.proxy2.$Proxy135.save(Unknown Source)
	at tech.robd.jwt.service.DatabaseInitService.createConfiguredDomains(DatabaseInitService.java:81)
	at tech.robd.jwt.service.DatabaseInitService.initialize(DatabaseInitService.java:55)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMethod.invoke(InitDestroyAnnotationBeanPostProcessor.java:457)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:401)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:219)
	... 18 common frames omitted
Caused by: org.hibernate.PropertyValueException: not-null property references a null or transient value : tech.robd.jwt.entity.Domain.name
	at org.hibernate.engine.internal.Nullability.checkNullability(Nullability.java:109)
	at org.hibernate.engine.internal.Nullability.checkNullability(Nullability.java:54)
	at org.hibernate.action.internal.AbstractEntityInsertAction.nullifyTransientReferencesIfNotAlready(AbstractEntityInsertAction.java:124)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:69)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:674)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:291)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:272)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:322)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:363)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:277)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:180)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:140)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:175)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:93)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:77)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:54)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:755)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:739)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at jdk.proxy2/jdk.proxy2.$Proxy127.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:617)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:288)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:168)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 32 common frames omitted
2025-03-20 09:41:54 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 20388 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 09:41:54 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 09:41:54 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 09:41:55 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 09:41:56 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 89 ms. Found 6 JPA repository interfaces.
2025-03-20 09:41:56 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8081 (http)
2025-03-20 09:41:57 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-03-20 09:41:57 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 09:41:57 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 09:41:57 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 09:41:57 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2089 ms
2025-03-20 09:41:57 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 09:41:57 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 09:41:57 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 09:41:57 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 09:41:58 INFO  tech.robd.jwt.util.JwtTokenUtil - JWT secret key loaded from file successfully
2025-03-20 09:41:58 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 09:41:58 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 09:41:58 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 09:41:58 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 09:41:59 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 09:41:59 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 09:42:00 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 09:42:02 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 09:42:02 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 09:42:02 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 09:42:02 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 09:42:02 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 09:42:02 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 09:42:02 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 09:42:03 INFO  t.r.jwt.service.DatabaseInitService - Initializing database with domains, roles and users from configuration
2025-03-20 09:44:03 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "7cb0d" for domain: auth
2025-03-20 09:44:26 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: auth
2025-03-20 09:45:29 WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m9s284ms300s900ns).
2025-03-20 09:51:07 WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=5m37s386ms80s400ns).
2025-03-20 09:51:07 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "0c018" for domain: null
2025-03-20 09:51:07 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 90121, SQLState: 90121
2025-03-20 09:51:07 ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-214]
2025-03-20 09:51:07 ERROR o.s.o.jpa.EntityManagerFactoryUtils - Failed to release JPA EntityManager
org.hibernate.exception.JDBCConnectionException: Unable to release JDBC Connection [Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-214]] [n/a]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:49)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:94)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.releaseConnection(LogicalConnectionManagedImpl.java:228)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.close(LogicalConnectionManagedImpl.java:258)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.close(JdbcCoordinatorImpl.java:161)
	at org.hibernate.internal.AbstractSharedSessionContract.close(AbstractSharedSessionContract.java:396)
	at org.hibernate.internal.SessionImpl.closeWithoutOpenChecks(SessionImpl.java:412)
	at org.hibernate.internal.SessionImpl.close(SessionImpl.java:397)
	at org.springframework.orm.jpa.EntityManagerFactoryUtils.closeEntityManager(EntityManagerFactoryUtils.java:424)
	at org.springframework.orm.jpa.JpaTransactionManager.doCleanupAfterCompletion(JpaTransactionManager.java:649)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.cleanupAfterCompletion(AbstractPlatformTransactionManager.java:992)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processRollback(AbstractPlatformTransactionManager.java:875)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.rollback(AbstractPlatformTransactionManager.java:809)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.completeTransactionAfterThrowing(TransactionAspectSupport.java:678)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:395)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:244)
	at jdk.proxy2/jdk.proxy2.$Proxy135.save(Unknown Source)
	at tech.robd.jwt.service.DatabaseInitService.createConfiguredDomains(DatabaseInitService.java:81)
	at tech.robd.jwt.service.DatabaseInitService.initialize(DatabaseInitService.java:55)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMethod.invoke(InitDestroyAnnotationBeanPostProcessor.java:457)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:401)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:219)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:419)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1762)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:942)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:312)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)
	at tech.robd.jwt.JwtAuthApplication.main(JwtAuthApplication.java:46)
Caused by: org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:678)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.message.DbException.get(DbException.java:188)
	at org.h2.jdbc.JdbcConnection.checkClosed(JdbcConnection.java:1375)
	at org.h2.jdbc.JdbcConnection.setAutoCommit(JdbcConnection.java:402)
	at com.zaxxer.hikari.pool.PoolBase.resetConnectionState(PoolBase.java:214)
	at com.zaxxer.hikari.pool.PoolEntry.resetConnectionState(PoolEntry.java:106)
	at com.zaxxer.hikari.pool.ProxyConnection.close(ProxyConnection.java:254)
	at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.closeConnection(DatasourceConnectionProviderImpl.java:127)
	at org.hibernate.internal.NonContextualJdbcConnectionAccess.releaseConnection(NonContextualJdbcConnectionAccess.java:49)
	at org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.releaseConnection(LogicalConnectionManagedImpl.java:224)
	... 47 common frames omitted
2025-03-20 09:51:07 ERROR o.s.t.i.TransactionInterceptor - Application exception overridden by rollback exception
org.hibernate.PropertyValueException: not-null property references a null or transient value : tech.robd.jwt.entity.Domain.name
	at org.hibernate.engine.internal.Nullability.checkNullability(Nullability.java:109)
	at org.hibernate.engine.internal.Nullability.checkNullability(Nullability.java:54)
	at org.hibernate.action.internal.AbstractEntityInsertAction.nullifyTransientReferencesIfNotAlready(AbstractEntityInsertAction.java:124)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:69)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:674)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:291)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:272)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:322)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:363)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:277)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:180)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:140)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:175)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:93)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:77)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:54)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:755)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:739)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at jdk.proxy2/jdk.proxy2.$Proxy127.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:617)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:288)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:168)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:244)
	at jdk.proxy2/jdk.proxy2.$Proxy135.save(Unknown Source)
	at tech.robd.jwt.service.DatabaseInitService.createConfiguredDomains(DatabaseInitService.java:81)
	at tech.robd.jwt.service.DatabaseInitService.initialize(DatabaseInitService.java:55)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMethod.invoke(InitDestroyAnnotationBeanPostProcessor.java:457)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:401)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:219)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:419)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1762)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:942)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:312)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)
	at tech.robd.jwt.JwtAuthApplication.main(JwtAuthApplication.java:46)
2025-03-20 09:51:07 WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'databaseInitService': Invocation of init method failed
2025-03-20 09:51:07 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 09:51:07 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 09:51:07 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 09:51:18 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 36756 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 09:51:18 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 09:51:18 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 09:51:20 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 09:51:20 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 102 ms. Found 6 JPA repository interfaces.
2025-03-20 09:51:21 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8081 (http)
2025-03-20 09:51:21 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-03-20 09:51:21 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 09:51:21 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 09:51:21 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 09:51:21 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2548 ms
2025-03-20 09:51:21 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 09:51:21 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 09:51:21 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 09:51:21 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 09:51:21 INFO  tech.robd.jwt.util.JwtTokenUtil - JWT secret key loaded from file successfully
2025-03-20 09:51:21 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 09:51:21 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 09:51:21 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 09:51:21 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 09:51:22 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 09:51:22 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 09:51:22 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 09:51:23 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 09:51:23 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 09:51:23 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 09:51:23 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 09:51:23 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 09:51:23 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 09:51:23 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 09:51:24 INFO  t.r.jwt.service.DatabaseInitService - Initializing database with domains, roles and users from configuration
2025-03-20 09:51:24 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "8deb0" for domain: auth
2025-03-20 09:51:24 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: auth
2025-03-20 09:51:24 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "0af6e" for domain: app1
2025-03-20 09:51:24 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: app1
2025-03-20 09:51:24 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "1357f" for domain: default
2025-03-20 09:51:24 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: default
2025-03-20 09:51:24 WARN  t.r.jwt.service.DatabaseInitService - Domain not found for role ADMIN: null
2025-03-20 09:51:24 WARN  t.r.jwt.service.DatabaseInitService - Domain not found for role USER: null
2025-03-20 09:51:24 WARN  t.r.jwt.service.DatabaseInitService - Domain not found for role MANAGER: null
2025-03-20 09:51:24 WARN  t.r.jwt.service.DatabaseInitService - Domain not found for role ADMIN: null
2025-03-20 09:51:24 WARN  t.r.jwt.service.DatabaseInitService - Domain not found for role USER: null
2025-03-20 09:51:24 WARN  t.r.jwt.service.DatabaseInitService - Domain not found for role MANAGER: null
2025-03-20 09:51:24 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "0af6e" for user admin1 in domain: app1
2025-03-20 09:51:24 WARN  t.r.jwt.service.DatabaseInitService - Role not found for user admin1 in domain app1: ADMIN
2025-03-20 09:51:24 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: admin1 in domain: app1
2025-03-20 09:51:24 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "0af6e" for user user1 in domain: app1
2025-03-20 09:51:24 WARN  t.r.jwt.service.DatabaseInitService - Role not found for user user1 in domain app1: USER
2025-03-20 09:51:24 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user1 in domain: app1
2025-03-20 09:51:24 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "0af6e" for user user2 in domain: app1
2025-03-20 09:51:24 WARN  t.r.jwt.service.DatabaseInitService - Role not found for user user2 in domain app1: USER
2025-03-20 09:51:24 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user2 in domain: app1
2025-03-20 09:51:24 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "0af6e" for user user3 in domain: app1
2025-03-20 09:51:24 WARN  t.r.jwt.service.DatabaseInitService - Role not found for user user3 in domain app1: USER
2025-03-20 09:51:24 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user3 in domain: app1
2025-03-20 09:51:24 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "0af6e" for user manager1 in domain: app1
2025-03-20 09:51:25 WARN  t.r.jwt.service.DatabaseInitService - Role not found for user manager1 in domain app1: MANAGER
2025-03-20 09:51:25 WARN  t.r.jwt.service.DatabaseInitService - Role not found for user manager1 in domain app1: USER
2025-03-20 09:51:25 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: manager1 in domain: app1
2025-03-20 09:51:25 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-20 09:51:25 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5e1535e0, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6c27be1d, org.springframework.security.web.context.SecurityContextHolderFilter@6aaed880, org.springframework.security.web.header.HeaderWriterFilter@56a6aadb, org.springframework.security.web.authentication.logout.LogoutFilter@481b8d53, tech.robd.jwt.filter.JwtAuthenticationFilter@4c24f3a2, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@19c578bf, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7444714e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6b3708f0, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2e7cd4bb, org.springframework.security.web.access.ExceptionTranslationFilter@8d5b303, org.springframework.security.web.access.intercept.AuthorizationFilter@7f93fce1]
2025-03-20 09:51:26 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-03-20 09:51:26 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8081 (http) with context path ''
2025-03-20 09:51:26 INFO  tech.robd.jwt.JwtAuthApplication - Started JwtAuthApplication in 8.742 seconds (process running for 10.086)
2025-03-20 10:11:46 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-20 10:11:46 INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-20 10:11:46 INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-03-20 10:11:46 DEBUG o.s.security.web.FilterChainProxy - Securing POST /authenticate
2025-03-20 10:11:46 DEBUG t.r.j.filter.JwtAuthenticationFilter - No JWT token found in request
2025-03-20 10:11:46 DEBUG o.s.security.web.FilterChainProxy - Secured POST /authenticate
2025-03-20 10:11:46 INFO  t.robd.jwt.controller.AuthController - Authentication request received for username: user1
2025-03-20 10:11:46 DEBUG tech.robd.jwt.service.UserService - Validating credentials for user: user1
2025-03-20 10:11:46 WARN  tech.robd.jwt.service.UserService - Invalid password for user: user1
2025-03-20 10:11:46 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-03-20 10:15:48 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 10:15:48 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 10:15:48 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 10:15:56 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 7288 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 10:15:56 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 10:15:56 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 10:15:57 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 10:15:57 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 76 ms. Found 6 JPA repository interfaces.
2025-03-20 10:15:58 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8081 (http)
2025-03-20 10:15:58 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-03-20 10:15:58 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 10:15:58 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 10:15:58 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 10:15:58 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1881 ms
2025-03-20 10:15:58 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 10:15:58 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 10:15:58 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 10:15:58 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 10:15:58 INFO  tech.robd.jwt.util.JwtTokenUtil - JWT secret key loaded from file successfully
2025-03-20 10:15:58 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 10:15:58 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 10:15:59 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 10:15:59 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 10:15:59 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 10:15:59 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 10:15:59 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 10:16:00 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 10:16:00 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 10:16:00 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 10:16:00 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 10:16:00 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 10:16:00 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 10:16:00 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 10:16:01 INFO  t.r.jwt.service.DatabaseInitService - Initializing database with domains, roles and users from configuration
2025-03-20 10:16:01 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42104, SQLState: 42S04
2025-03-20 10:16:01 ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "DOMAINS" not found (this database is empty); SQL statement:
select d1_0.id,d1_0.default_pin,d1_0.display_name,d1_0.name from domains d1_0 where d1_0.name=? [42104-214]
2025-03-20 10:16:01 WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'databaseInitService': Invocation of init method failed
2025-03-20 10:16:01 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 10:16:01 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 10:16:01 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 10:20:32 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 11540 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 10:20:32 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 10:20:32 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 10:20:33 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 10:20:33 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 84 ms. Found 6 JPA repository interfaces.
2025-03-20 10:20:34 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8081 (http)
2025-03-20 10:20:34 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8081"]
2025-03-20 10:20:34 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 10:20:34 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 10:20:34 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 10:20:34 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2067 ms
2025-03-20 10:20:34 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 10:20:34 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 10:20:34 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 10:20:34 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 10:20:34 INFO  tech.robd.jwt.util.JwtTokenUtil - JWT secret key loaded from file successfully
2025-03-20 10:20:34 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 10:20:34 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 10:20:34 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 10:20:34 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 10:20:34 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 10:20:35 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 10:20:35 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 10:20:36 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 10:20:36 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 10:20:36 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 10:20:36 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 10:20:36 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 10:20:36 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 10:20:36 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 10:20:37 INFO  t.r.jwt.service.DatabaseInitService - Initializing database with domains, roles and users from configuration
2025-03-20 10:20:37 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "08fdd" for domain: sandcastle-auth
2025-03-20 10:20:37 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: sandcastle-auth
2025-03-20 10:20:37 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "8b363" for domain: app1
2025-03-20 10:20:37 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: app1
2025-03-20 10:20:37 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "a0283" for domain: default
2025-03-20 10:20:37 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: default
2025-03-20 10:20:37 WARN  t.r.jwt.service.DatabaseInitService - Domain not found for role ADMIN: null
2025-03-20 10:20:37 WARN  t.r.jwt.service.DatabaseInitService - Domain not found for role USER: null
2025-03-20 10:20:37 WARN  t.r.jwt.service.DatabaseInitService - Domain not found for role MANAGER: null
2025-03-20 10:20:37 WARN  t.r.jwt.service.DatabaseInitService - Domain not found for role ADMIN: null
2025-03-20 10:20:37 WARN  t.r.jwt.service.DatabaseInitService - Domain not found for role USER: null
2025-03-20 10:20:37 WARN  t.r.jwt.service.DatabaseInitService - Domain not found for role MANAGER: null
2025-03-20 10:20:37 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "08fdd" for user authadmin in domain: sandcastle-auth
2025-03-20 10:20:37 WARN  t.r.jwt.service.DatabaseInitService - Role not found for user authadmin in domain sandcastle-auth: ADMIN
2025-03-20 10:20:37 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: authadmin in domain: sandcastle-auth
2025-03-20 10:20:37 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "8b363" for user admin1 in domain: app1
2025-03-20 10:20:37 WARN  t.r.jwt.service.DatabaseInitService - Role not found for user admin1 in domain app1: ADMIN
2025-03-20 10:20:37 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: admin1 in domain: app1
2025-03-20 10:20:37 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "8b363" for user user1 in domain: app1
2025-03-20 10:20:37 WARN  t.r.jwt.service.DatabaseInitService - Role not found for user user1 in domain app1: USER
2025-03-20 10:20:37 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user1 in domain: app1
2025-03-20 10:20:37 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "8b363" for user user2 in domain: app1
2025-03-20 10:20:37 WARN  t.r.jwt.service.DatabaseInitService - Role not found for user user2 in domain app1: USER
2025-03-20 10:20:37 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user2 in domain: app1
2025-03-20 10:20:37 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "8b363" for user user3 in domain: app1
2025-03-20 10:20:38 WARN  t.r.jwt.service.DatabaseInitService - Role not found for user user3 in domain app1: USER
2025-03-20 10:20:38 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user3 in domain: app1
2025-03-20 10:20:38 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "8b363" for user manager1 in domain: app1
2025-03-20 10:20:38 WARN  t.r.jwt.service.DatabaseInitService - Role not found for user manager1 in domain app1: MANAGER
2025-03-20 10:20:38 WARN  t.r.jwt.service.DatabaseInitService - Role not found for user manager1 in domain app1: USER
2025-03-20 10:20:38 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: manager1 in domain: app1
2025-03-20 10:20:38 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-20 10:20:38 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6287e312, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6a450cb5, org.springframework.security.web.context.SecurityContextHolderFilter@1f031994, org.springframework.security.web.header.HeaderWriterFilter@700b035b, org.springframework.security.web.authentication.logout.LogoutFilter@1dd4c691, tech.robd.jwt.filter.JwtAuthenticationFilter@53feeac9, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@e00c94e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@20c55658, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@951053f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@c4bb119, org.springframework.security.web.access.ExceptionTranslationFilter@5b2c9a69, org.springframework.security.web.access.intercept.AuthorizationFilter@216de23a]
2025-03-20 10:20:40 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8081"]
2025-03-20 10:20:40 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 8081 (http) with context path ''
2025-03-20 10:20:40 INFO  tech.robd.jwt.JwtAuthApplication - Started JwtAuthApplication in 9.248 seconds (process running for 10.321)
2025-03-20 10:25:02 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-20 10:25:02 INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-20 10:25:02 INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-03-20 10:25:02 DEBUG o.s.security.web.FilterChainProxy - Securing POST /authenticate
2025-03-20 10:25:02 DEBUG t.r.j.filter.JwtAuthenticationFilter - No JWT token found in request
2025-03-20 10:25:02 DEBUG o.s.security.web.FilterChainProxy - Secured POST /authenticate
2025-03-20 10:25:02 INFO  t.robd.jwt.controller.AuthController - Authentication request received for username: authadmin
2025-03-20 10:25:02 DEBUG tech.robd.jwt.service.UserService - Validating credentials for user: authadmin
2025-03-20 10:25:02 INFO  tech.robd.jwt.service.UserService - Credentials validated successfully for user: authadmin
2025-03-20 10:25:02 INFO  t.robd.jwt.controller.AuthController - Authentication successful for user 'authadmin'
2025-03-20 10:25:02 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-03-20 10:25:21 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/rest/domains
2025-03-20 10:25:21 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 10:25:21 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-03-20 10:25:21 DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-03-20 10:25:21 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-03-20 10:25:21 DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost:8081/error?continue to session
2025-03-20 10:25:21 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2025-03-20 10:25:21 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@24ef007f
2025-03-20 10:25:51 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 10:25:51 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 10:25:51 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-03-20 10:25:52 DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-03-20 10:25:52 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-03-20 10:25:52 DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost:8081/error?continue to session
2025-03-20 10:25:52 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2025-03-20 10:25:52 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@24ef007f
2025-03-20 10:26:42 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 10:26:42 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 10:26:42 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-03-20 10:26:42 DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-03-20 10:26:42 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-03-20 10:26:42 DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost:8081/error?continue to session
2025-03-20 10:26:42 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2025-03-20 10:26:42 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@24ef007f
2025-03-20 13:46:08 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 13:46:08 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 13:46:08 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-03-20 13:46:08 DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-03-20 13:46:08 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-03-20 13:46:08 DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost:8081/error?continue to session
2025-03-20 13:46:08 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2025-03-20 13:46:08 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@24ef007f
2025-03-20 13:48:13 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 13:48:13 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 13:48:13 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 13:48:38 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 12272 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 13:48:38 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 13:48:38 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 13:48:39 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 13:48:39 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 107 ms. Found 6 JPA repository interfaces.
2025-03-20 13:48:40 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 18081 (http)
2025-03-20 13:48:40 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-18081"]
2025-03-20 13:48:40 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 13:48:40 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 13:48:40 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 13:48:40 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2260 ms
2025-03-20 13:48:40 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 13:48:41 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 13:48:41 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 13:48:41 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 13:48:41 INFO  tech.robd.jwt.util.JwtTokenUtil - JWT secret key loaded from file successfully
2025-03-20 13:48:41 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 13:48:41 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 13:48:41 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 13:48:41 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 13:48:41 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 13:48:42 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 13:48:42 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 13:48:43 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 13:48:43 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 13:48:43 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 13:48:43 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 13:48:43 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 13:48:43 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 13:48:43 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 13:48:44 INFO  t.r.jwt.service.DatabaseInitService - Initializing database with domains, roles and users from configuration
2025-03-20 13:48:44 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "87bc7" for domain: sandcastle-auth
2025-03-20 13:48:44 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: sandcastle-auth
2025-03-20 13:48:44 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "4a6bd" for domain: app1
2025-03-20 13:48:44 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: app1
2025-03-20 13:48:44 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "c6177" for domain: default
2025-03-20 13:48:44 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: default
2025-03-20 13:48:44 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: sandcastle-auth
2025-03-20 13:48:44 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 23505, SQLState: 23505
2025-03-20 13:48:44 ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Unique index or primary key violation: "PUBLIC.UK_OFX66KERUAPI6VYQPV6F2OR37_INDEX_4 ON PUBLIC.ROLES(NAME NULLS FIRST) VALUES ( /* 1 */ 'ADMIN' )"; SQL statement:
insert into roles (domain_id,name,id) values (?,?,default) [23505-214]
2025-03-20 13:48:44 WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'databaseInitService': Invocation of init method failed
2025-03-20 13:48:44 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 13:48:44 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 13:48:44 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 13:48:44 INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-03-20 13:48:44 INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-03-20 13:48:44 ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'databaseInitService': Invocation of init method failed
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:222)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:419)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1762)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:942)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:312)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)
	at tech.robd.jwt.JwtAuthApplication.main(JwtAuthApplication.java:46)
Caused by: org.springframework.dao.DataIntegrityViolationException: could not execute statement [Unique index or primary key violation: "PUBLIC.UK_OFX66KERUAPI6VYQPV6F2OR37_INDEX_4 ON PUBLIC.ROLES(NAME NULLS FIRST) VALUES ( /* 1 */ 'ADMIN' )"; SQL statement:
insert into roles (domain_id,name,id) values (?,?,default) [23505-214]] [insert into roles (domain_id,name,id) values (?,?,default)]; SQL [insert into roles (domain_id,name,id) values (?,?,default)]; constraint ["PUBLIC.UK_OFX66KERUAPI6VYQPV6F2OR37_INDEX_4 ON PUBLIC.ROLES(NAME NULLS FIRST) VALUES ( /* 1 */ 'ADMIN' )"; SQL statement:
insert into roles (domain_id,name,id) values (?,?,default) [23505-214]]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:269)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:229)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:244)
	at jdk.proxy2/jdk.proxy2.$Proxy137.save(Unknown Source)
	at tech.robd.jwt.service.DatabaseInitService.createConfiguredRoles(DatabaseInitService.java:165)
	at tech.robd.jwt.service.DatabaseInitService.initialize(DatabaseInitService.java:58)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMethod.invoke(InitDestroyAnnotationBeanPostProcessor.java:457)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:401)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:219)
	... 18 common frames omitted
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement [Unique index or primary key violation: "PUBLIC.UK_OFX66KERUAPI6VYQPV6F2OR37_INDEX_4 ON PUBLIC.ROLES(NAME NULLS FIRST) VALUES ( /* 1 */ 'ADMIN' )"; SQL statement:
insert into roles (domain_id,name,id) values (?,?,default) [23505-214]] [insert into roles (domain_id,name,id) values (?,?,default)]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:278)
	at org.hibernate.id.insert.GetGeneratedKeysDelegate.performInsert(GetGeneratedKeysDelegate.java:107)
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorPostInsertSingleTable.execute(MutationExecutorPostInsertSingleTable.java:101)
	at org.hibernate.persister.entity.mutation.InsertCoordinator.doStaticInserts(InsertCoordinator.java:170)
	at org.hibernate.persister.entity.mutation.InsertCoordinator.coordinateInsert(InsertCoordinator.java:112)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2756)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:81)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:674)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:291)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:272)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:322)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:363)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:277)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:180)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:140)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:175)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:93)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:77)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:54)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:755)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:739)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at jdk.proxy2/jdk.proxy2.$Proxy127.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:617)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:288)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:168)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 32 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: "PUBLIC.UK_OFX66KERUAPI6VYQPV6F2OR37_INDEX_4 ON PUBLIC.ROLES(NAME NULLS FIRST) VALUES ( /* 1 */ 'ADMIN' )"; SQL statement:
insert into roles (domain_id,name,id) values (?,?,default) [23505-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:508)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.index.Index.getDuplicateKeyException(Index.java:525)
	at org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)
	at org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)
	at org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)
	at org.h2.command.dml.Insert.insertRows(Insert.java:174)
	at org.h2.command.dml.Insert.update(Insert.java:135)
	at org.h2.command.CommandContainer.executeUpdateWithGeneratedKeys(CommandContainer.java:242)
	at org.h2.command.CommandContainer.update(CommandContainer.java:163)
	at org.h2.command.Command.executeUpdate(Command.java:252)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:275)
	... 77 common frames omitted
2025-03-20 14:03:50 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 39032 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 14:03:50 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 14:03:50 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 14:03:51 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 14:03:51 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 94 ms. Found 6 JPA repository interfaces.
2025-03-20 14:03:52 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 18081 (http)
2025-03-20 14:03:52 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-18081"]
2025-03-20 14:03:52 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 14:03:52 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 14:03:52 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 14:03:52 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1947 ms
2025-03-20 14:03:52 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 14:03:52 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 14:03:52 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 14:03:52 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 14:03:53 INFO  tech.robd.jwt.util.JwtTokenUtil - JWT secret key loaded from file successfully
2025-03-20 14:03:53 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 14:03:53 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 14:03:54 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 14:03:54 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 14:03:54 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 14:03:55 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 14:03:55 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 14:03:57 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 14:03:57 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 14:03:58 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 14:03:58 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 14:03:58 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 14:03:58 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 14:03:58 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 14:03:59 INFO  t.r.jwt.service.DatabaseInitService - Initializing database with domains, roles and users from configuration
2025-03-20 14:18:54 WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=15m1s963ms921s800ns).
2025-03-20 14:18:56 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "ba1c5" for domain: sandcastle-auth
2025-03-20 14:18:58 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: sandcastle-auth
2025-03-20 14:19:00 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "f3eca" for domain: app1
2025-03-20 14:19:01 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: app1
2025-03-20 14:19:03 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "edb32" for domain: default
2025-03-20 14:19:04 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: default
2025-03-20 14:19:04 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: sandcastle-auth
2025-03-20 14:19:04 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 23505, SQLState: 23505
2025-03-20 14:19:04 ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Unique index or primary key violation: "PUBLIC.UK_OFX66KERUAPI6VYQPV6F2OR37_INDEX_4 ON PUBLIC.ROLES(NAME NULLS FIRST) VALUES ( /* 1 */ 'ADMIN' )"; SQL statement:
insert into roles (domain_id,name,id) values (?,?,default) [23505-214]
2025-03-20 14:19:04 WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'databaseInitService': Invocation of init method failed
2025-03-20 14:19:04 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 14:19:04 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 14:19:04 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 14:19:04 INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-03-20 14:19:04 INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-03-20 14:19:04 ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'databaseInitService': Invocation of init method failed
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:222)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:419)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1762)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:942)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:312)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)
	at tech.robd.jwt.JwtAuthApplication.main(JwtAuthApplication.java:46)
Caused by: org.springframework.dao.DataIntegrityViolationException: could not execute statement [Unique index or primary key violation: "PUBLIC.UK_OFX66KERUAPI6VYQPV6F2OR37_INDEX_4 ON PUBLIC.ROLES(NAME NULLS FIRST) VALUES ( /* 1 */ 'ADMIN' )"; SQL statement:
insert into roles (domain_id,name,id) values (?,?,default) [23505-214]] [insert into roles (domain_id,name,id) values (?,?,default)]; SQL [insert into roles (domain_id,name,id) values (?,?,default)]; constraint ["PUBLIC.UK_OFX66KERUAPI6VYQPV6F2OR37_INDEX_4 ON PUBLIC.ROLES(NAME NULLS FIRST) VALUES ( /* 1 */ 'ADMIN' )"; SQL statement:
insert into roles (domain_id,name,id) values (?,?,default) [23505-214]]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:269)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:229)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:244)
	at jdk.proxy2/jdk.proxy2.$Proxy137.save(Unknown Source)
	at tech.robd.jwt.service.DatabaseInitService.createConfiguredRoles(DatabaseInitService.java:165)
	at tech.robd.jwt.service.DatabaseInitService.initialize(DatabaseInitService.java:58)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMethod.invoke(InitDestroyAnnotationBeanPostProcessor.java:457)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:401)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:219)
	... 18 common frames omitted
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement [Unique index or primary key violation: "PUBLIC.UK_OFX66KERUAPI6VYQPV6F2OR37_INDEX_4 ON PUBLIC.ROLES(NAME NULLS FIRST) VALUES ( /* 1 */ 'ADMIN' )"; SQL statement:
insert into roles (domain_id,name,id) values (?,?,default) [23505-214]] [insert into roles (domain_id,name,id) values (?,?,default)]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:278)
	at org.hibernate.id.insert.GetGeneratedKeysDelegate.performInsert(GetGeneratedKeysDelegate.java:107)
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorPostInsertSingleTable.execute(MutationExecutorPostInsertSingleTable.java:101)
	at org.hibernate.persister.entity.mutation.InsertCoordinator.doStaticInserts(InsertCoordinator.java:170)
	at org.hibernate.persister.entity.mutation.InsertCoordinator.coordinateInsert(InsertCoordinator.java:112)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2756)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:81)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:674)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:291)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:272)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:322)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:363)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:277)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:180)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:140)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:175)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:93)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:77)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:54)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:755)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:739)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at jdk.proxy2/jdk.proxy2.$Proxy127.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:617)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:288)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:168)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 32 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: "PUBLIC.UK_OFX66KERUAPI6VYQPV6F2OR37_INDEX_4 ON PUBLIC.ROLES(NAME NULLS FIRST) VALUES ( /* 1 */ 'ADMIN' )"; SQL statement:
insert into roles (domain_id,name,id) values (?,?,default) [23505-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:508)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.index.Index.getDuplicateKeyException(Index.java:525)
	at org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)
	at org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)
	at org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)
	at org.h2.command.dml.Insert.insertRows(Insert.java:174)
	at org.h2.command.dml.Insert.update(Insert.java:135)
	at org.h2.command.CommandContainer.executeUpdateWithGeneratedKeys(CommandContainer.java:242)
	at org.h2.command.CommandContainer.update(CommandContainer.java:163)
	at org.h2.command.Command.executeUpdate(Command.java:252)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:275)
	... 77 common frames omitted
2025-03-20 14:19:42 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 31048 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 14:19:42 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 14:19:42 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 14:19:43 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 14:19:43 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 96 ms. Found 6 JPA repository interfaces.
2025-03-20 14:19:44 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 18081 (http)
2025-03-20 14:19:44 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-18081"]
2025-03-20 14:19:44 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 14:19:44 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 14:19:45 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 14:19:45 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2360 ms
2025-03-20 14:19:45 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 14:19:45 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 14:19:45 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 14:19:45 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 14:19:46 INFO  tech.robd.jwt.util.JwtTokenUtil - JWT secret key loaded from file successfully
2025-03-20 14:19:46 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 14:19:46 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 14:19:46 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 14:19:46 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 14:19:47 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 14:19:47 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 14:19:48 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 14:19:50 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 14:19:50 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 14:19:50 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 14:19:50 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 14:19:50 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 14:19:50 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 14:19:50 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 14:19:51 INFO  t.r.jwt.service.DatabaseInitService - Initializing database with domains, roles and users from configuration
2025-03-20 14:22:08 WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=2m22s599ms605s900ns).
2025-03-20 14:22:13 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "52ef9" for domain: sandcastle-auth
2025-03-20 14:22:15 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: sandcastle-auth
2025-03-20 14:22:18 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "96fd0" for domain: app1
2025-03-20 14:22:19 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: app1
2025-03-20 14:22:26 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "e91ee" for domain: default
2025-03-20 14:22:27 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: default
2025-03-20 14:22:27 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: sandcastle-auth
2025-03-20 14:22:27 WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 23505, SQLState: 23505
2025-03-20 14:22:27 ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Unique index or primary key violation: "PUBLIC.UK_OFX66KERUAPI6VYQPV6F2OR37_INDEX_4 ON PUBLIC.ROLES(NAME NULLS FIRST) VALUES ( /* 1 */ 'ADMIN' )"; SQL statement:
insert into roles (domain_id,name,id) values (?,?,default) [23505-214]
2025-03-20 14:22:27 WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'databaseInitService': Invocation of init method failed
2025-03-20 14:22:27 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 14:22:27 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 14:22:27 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 14:22:27 INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-03-20 14:22:27 INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-03-20 14:22:27 ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'databaseInitService': Invocation of init method failed
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:222)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:419)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1762)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:942)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:312)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)
	at tech.robd.jwt.JwtAuthApplication.main(JwtAuthApplication.java:46)
Caused by: org.springframework.dao.DataIntegrityViolationException: could not execute statement [Unique index or primary key violation: "PUBLIC.UK_OFX66KERUAPI6VYQPV6F2OR37_INDEX_4 ON PUBLIC.ROLES(NAME NULLS FIRST) VALUES ( /* 1 */ 'ADMIN' )"; SQL statement:
insert into roles (domain_id,name,id) values (?,?,default) [23505-214]] [insert into roles (domain_id,name,id) values (?,?,default)]; SQL [insert into roles (domain_id,name,id) values (?,?,default)]; constraint ["PUBLIC.UK_OFX66KERUAPI6VYQPV6F2OR37_INDEX_4 ON PUBLIC.ROLES(NAME NULLS FIRST) VALUES ( /* 1 */ 'ADMIN' )"; SQL statement:
insert into roles (domain_id,name,id) values (?,?,default) [23505-214]]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:269)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:229)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:164)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:244)
	at jdk.proxy2/jdk.proxy2.$Proxy137.save(Unknown Source)
	at tech.robd.jwt.service.DatabaseInitService.createConfiguredRoles(DatabaseInitService.java:165)
	at tech.robd.jwt.service.DatabaseInitService.initialize(DatabaseInitService.java:58)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMethod.invoke(InitDestroyAnnotationBeanPostProcessor.java:457)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:401)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:219)
	... 18 common frames omitted
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement [Unique index or primary key violation: "PUBLIC.UK_OFX66KERUAPI6VYQPV6F2OR37_INDEX_4 ON PUBLIC.ROLES(NAME NULLS FIRST) VALUES ( /* 1 */ 'ADMIN' )"; SQL statement:
insert into roles (domain_id,name,id) values (?,?,default) [23505-214]] [insert into roles (domain_id,name,id) values (?,?,default)]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:60)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:56)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:278)
	at org.hibernate.id.insert.GetGeneratedKeysDelegate.performInsert(GetGeneratedKeysDelegate.java:107)
	at org.hibernate.engine.jdbc.mutation.internal.MutationExecutorPostInsertSingleTable.execute(MutationExecutorPostInsertSingleTable.java:101)
	at org.hibernate.persister.entity.mutation.InsertCoordinator.doStaticInserts(InsertCoordinator.java:170)
	at org.hibernate.persister.entity.mutation.InsertCoordinator.coordinateInsert(InsertCoordinator.java:112)
	at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2756)
	at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:81)
	at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:674)
	at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:291)
	at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:272)
	at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:322)
	at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:363)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:277)
	at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:180)
	at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:140)
	at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:175)
	at org.hibernate.event.internal.DefaultPersistEventListener.persist(DefaultPersistEventListener.java:93)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:77)
	at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:54)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:755)
	at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:739)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)
	at jdk.proxy2/jdk.proxy2.$Proxy127.persist(Unknown Source)
	at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:617)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:288)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120)
	at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516)
	at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:168)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:72)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 32 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: "PUBLIC.UK_OFX66KERUAPI6VYQPV6F2OR37_INDEX_4 ON PUBLIC.ROLES(NAME NULLS FIRST) VALUES ( /* 1 */ 'ADMIN' )"; SQL statement:
insert into roles (domain_id,name,id) values (?,?,default) [23505-214]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:508)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.index.Index.getDuplicateKeyException(Index.java:525)
	at org.h2.mvstore.db.MVSecondaryIndex.checkUnique(MVSecondaryIndex.java:223)
	at org.h2.mvstore.db.MVSecondaryIndex.add(MVSecondaryIndex.java:184)
	at org.h2.mvstore.db.MVTable.addRow(MVTable.java:519)
	at org.h2.command.dml.Insert.insertRows(Insert.java:174)
	at org.h2.command.dml.Insert.update(Insert.java:135)
	at org.h2.command.CommandContainer.executeUpdateWithGeneratedKeys(CommandContainer.java:242)
	at org.h2.command.CommandContainer.update(CommandContainer.java:163)
	at org.h2.command.Command.executeUpdate(Command.java:252)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:209)
	at org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:169)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:275)
	... 77 common frames omitted
2025-03-20 14:23:41 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 10928 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 14:23:41 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 14:23:41 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 14:23:43 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 14:23:43 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 96 ms. Found 6 JPA repository interfaces.
2025-03-20 14:23:43 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 18081 (http)
2025-03-20 14:23:43 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-18081"]
2025-03-20 14:23:43 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 14:23:43 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 14:23:44 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 14:23:44 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2110 ms
2025-03-20 14:23:44 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 14:23:44 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 14:23:44 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 14:23:44 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 14:23:44 INFO  tech.robd.jwt.util.JwtTokenUtil - JWT secret key loaded from file successfully
2025-03-20 14:23:44 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 14:23:44 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 14:23:44 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 14:23:44 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 14:23:44 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 14:23:45 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 14:23:45 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 14:23:46 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 14:23:46 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 14:23:46 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 14:23:46 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 14:23:46 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 14:23:46 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 14:23:46 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 14:23:46 INFO  t.r.jwt.service.DatabaseInitService - Initializing database with domains, roles and users from configuration
2025-03-20 14:23:46 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "1e920" for domain: sandcastle-auth
2025-03-20 14:23:46 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: sandcastle-auth
2025-03-20 14:23:46 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "195fd" for domain: app1
2025-03-20 14:23:46 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: app1
2025-03-20 14:23:46 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "a86c9" for domain: default
2025-03-20 14:23:46 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: default
2025-03-20 14:23:47 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: sandcastle-auth
2025-03-20 14:23:47 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: app1
2025-03-20 14:23:47 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: USER in domain: app1
2025-03-20 14:23:47 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: MANAGER in domain: app1
2025-03-20 14:23:47 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using users pin from config "08fdd" for user authadmin in domain: sandcastle-auth
2025-03-20 14:23:47 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: authadmin in domain: sandcastle-auth
2025-03-20 14:23:47 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "195fd" for user admin1 in domain: app1
2025-03-20 14:23:47 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: admin1 in domain: app1
2025-03-20 14:23:47 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "195fd" for user user1 in domain: app1
2025-03-20 14:23:47 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user1 in domain: app1
2025-03-20 14:23:47 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "195fd" for user user2 in domain: app1
2025-03-20 14:23:47 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user2 in domain: app1
2025-03-20 14:23:47 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "195fd" for user user3 in domain: app1
2025-03-20 14:23:47 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user3 in domain: app1
2025-03-20 14:23:47 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "195fd" for user manager1 in domain: app1
2025-03-20 14:23:47 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: manager1 in domain: app1
2025-03-20 14:23:47 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-20 14:23:48 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3ad5f99, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@72b4ecb2, org.springframework.security.web.context.SecurityContextHolderFilter@5246453e, org.springframework.security.web.header.HeaderWriterFilter@2c9af700, org.springframework.security.web.authentication.logout.LogoutFilter@552b7481, tech.robd.jwt.filter.JwtAuthenticationFilter@17fbfb02, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@56f4f385, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4b19ee18, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2561d61, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@457dc809, org.springframework.security.web.access.ExceptionTranslationFilter@44b1d2fa, org.springframework.security.web.access.intercept.AuthorizationFilter@3d72abea]
2025-03-20 14:23:48 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-18081"]
2025-03-20 14:23:48 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 18081 (http) with context path ''
2025-03-20 14:23:48 INFO  tech.robd.jwt.JwtAuthApplication - Started JwtAuthApplication in 9.88 seconds (process running for 12.406)
2025-03-20 14:24:12 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-20 14:24:12 INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-20 14:24:12 INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-03-20 14:24:12 DEBUG o.s.security.web.FilterChainProxy - Securing POST /authenticate
2025-03-20 14:24:12 DEBUG t.r.j.filter.JwtAuthenticationFilter - No JWT token found in request
2025-03-20 14:24:12 DEBUG o.s.security.web.FilterChainProxy - Secured POST /authenticate
2025-03-20 14:24:12 INFO  t.robd.jwt.controller.AuthController - Authentication request received for username: authadmin
2025-03-20 14:24:12 DEBUG tech.robd.jwt.service.UserService - Validating credentials for user: authadmin
2025-03-20 14:24:13 INFO  tech.robd.jwt.service.UserService - Credentials validated successfully for user: authadmin
2025-03-20 14:24:13 INFO  t.robd.jwt.controller.AuthController - Authentication successful for user 'authadmin'
2025-03-20 14:24:13 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-03-20 14:24:40 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 14:24:40 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 14:24:40 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-03-20 14:24:40 DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-03-20 14:24:40 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-03-20 14:24:40 DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost:18081/error?continue to session
2025-03-20 14:24:40 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2025-03-20 14:24:40 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@79b7684d
2025-03-20 14:25:15 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 14:25:15 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 14:25:15 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-03-20 14:25:15 DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-03-20 14:25:15 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-03-20 14:25:15 DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost:18081/error?continue to session
2025-03-20 14:25:15 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2025-03-20 14:25:15 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@79b7684d
2025-03-20 14:25:24 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 14:25:24 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 14:25:24 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 14:25:31 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 37644 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 14:25:31 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 14:25:31 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 14:25:32 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 14:25:32 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 101 ms. Found 6 JPA repository interfaces.
2025-03-20 14:25:33 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 18081 (http)
2025-03-20 14:25:33 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-18081"]
2025-03-20 14:25:33 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 14:25:33 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 14:25:33 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 14:25:33 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2134 ms
2025-03-20 14:25:33 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 14:25:34 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 14:25:34 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 14:25:34 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 14:25:34 INFO  tech.robd.jwt.util.JwtTokenUtil - JWT secret key loaded from file successfully
2025-03-20 14:25:35 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 14:25:35 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 14:25:35 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 14:25:35 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 14:25:35 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 14:25:36 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 14:25:36 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 14:25:38 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 14:25:39 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 14:25:39 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 14:25:39 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 14:25:39 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 14:25:39 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 14:25:39 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 14:25:40 INFO  t.r.jwt.service.DatabaseInitService - Initializing database with domains, roles and users from configuration
2025-03-20 14:28:02 WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=2m28s513ms579s500ns).
2025-03-20 14:28:03 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "90ca5" for domain: sandcastle-auth
2025-03-20 14:28:04 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: sandcastle-auth
2025-03-20 14:28:04 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "b909a" for domain: app1
2025-03-20 14:28:05 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: app1
2025-03-20 14:28:06 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "51012" for domain: default
2025-03-20 14:28:06 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: default
2025-03-20 14:28:06 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: sandcastle-auth
2025-03-20 14:28:06 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: app1
2025-03-20 14:28:06 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: USER in domain: app1
2025-03-20 14:28:06 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: MANAGER in domain: app1
2025-03-20 14:28:08 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using users pin from config "08fdd" for user authadmin in domain: sandcastle-auth
2025-03-20 14:28:08 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: authadmin in domain: sandcastle-auth
2025-03-20 14:28:08 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "b909a" for user admin1 in domain: app1
2025-03-20 14:28:08 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: admin1 in domain: app1
2025-03-20 14:28:08 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "b909a" for user user1 in domain: app1
2025-03-20 14:28:08 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user1 in domain: app1
2025-03-20 14:28:08 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "b909a" for user user2 in domain: app1
2025-03-20 14:28:08 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user2 in domain: app1
2025-03-20 14:28:08 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "b909a" for user user3 in domain: app1
2025-03-20 14:28:08 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user3 in domain: app1
2025-03-20 14:28:08 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "b909a" for user manager1 in domain: app1
2025-03-20 14:28:08 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: manager1 in domain: app1
2025-03-20 14:28:08 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-20 14:28:09 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6aeb769d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@51f412e6, org.springframework.security.web.context.SecurityContextHolderFilter@75a6cdb, org.springframework.security.web.header.HeaderWriterFilter@16b1b213, org.springframework.security.web.authentication.logout.LogoutFilter@236bb278, tech.robd.jwt.filter.JwtAuthenticationFilter@64dfb31d, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@638b05fb, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@637de489, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@38614875, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7234db3, org.springframework.security.web.access.ExceptionTranslationFilter@6421d85c, org.springframework.security.web.access.intercept.AuthorizationFilter@e9c5db9]
2025-03-20 14:28:10 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-18081"]
2025-03-20 14:28:11 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 18081 (http) with context path ''
2025-03-20 14:28:11 INFO  tech.robd.jwt.JwtAuthApplication - Started JwtAuthApplication in 160.588 seconds (process running for 162.232)
2025-03-20 14:28:13 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-20 14:28:13 INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-20 14:28:13 INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-03-20 14:28:13 DEBUG o.s.security.web.FilterChainProxy - Securing POST /authenticate
2025-03-20 14:28:19 DEBUG t.r.j.filter.JwtAuthenticationFilter - No JWT token found in request
2025-03-20 14:28:19 DEBUG o.s.security.web.FilterChainProxy - Secured POST /authenticate
2025-03-20 14:28:21 INFO  t.robd.jwt.controller.AuthController - Authentication request received for username: authadmin
2025-03-20 14:28:21 DEBUG tech.robd.jwt.service.UserService - Validating credentials for user: authadmin
2025-03-20 14:28:21 INFO  tech.robd.jwt.service.UserService - Credentials validated successfully for user: authadmin
2025-03-20 14:28:21 INFO  t.robd.jwt.controller.AuthController - Authentication successful for user 'authadmin'
2025-03-20 14:28:21 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-03-20 14:28:33 DEBUG o.s.security.web.FilterChainProxy - Securing POST /authenticate
2025-03-20 14:28:41 DEBUG t.r.j.filter.JwtAuthenticationFilter - No JWT token found in request
2025-03-20 14:28:41 DEBUG o.s.security.web.FilterChainProxy - Secured POST /authenticate
2025-03-20 14:28:42 INFO  t.robd.jwt.controller.AuthController - Authentication request received for username: authadmin
2025-03-20 14:28:42 DEBUG tech.robd.jwt.service.UserService - Validating credentials for user: authadmin
2025-03-20 14:28:42 INFO  tech.robd.jwt.service.UserService - Credentials validated successfully for user: authadmin
2025-03-20 14:28:42 INFO  t.robd.jwt.controller.AuthController - Authentication successful for user 'authadmin'
2025-03-20 14:28:42 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-03-20 14:30:13 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 14:31:45 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 14:32:14 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-03-20 14:32:44 DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-03-20 14:32:44 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-03-20 14:32:44 DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost:18081/error?continue to session
2025-03-20 14:32:44 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2025-03-20 14:32:44 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@4b4d04e6
2025-03-20 14:36:39 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 14:37:03 WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=48s128ms179s900ns).
2025-03-20 14:37:16 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 14:42:01 WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=4m27s111ms80s400ns).
2025-03-20 14:42:03 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-03-20 14:42:12 DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-03-20 14:42:12 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-03-20 14:42:12 DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost:18081/error?continue to session
2025-03-20 14:42:12 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2025-03-20 14:42:12 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@4b4d04e6
2025-03-20 14:47:43 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 14:47:43 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 14:47:43 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 14:47:50 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 34408 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 14:47:50 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 14:47:50 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 14:47:51 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 14:47:51 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 86 ms. Found 6 JPA repository interfaces.
2025-03-20 14:47:52 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 18081 (http)
2025-03-20 14:47:52 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-18081"]
2025-03-20 14:47:52 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 14:47:52 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 14:47:52 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 14:47:52 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1953 ms
2025-03-20 14:47:52 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 14:47:52 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 14:47:52 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 14:47:52 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 14:47:53 INFO  tech.robd.jwt.util.JwtTokenUtil - JWT secret key loaded from file successfully
2025-03-20 14:47:53 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 14:47:53 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 14:47:53 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 14:47:53 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 14:47:54 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 14:47:54 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 14:47:55 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 14:47:56 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 14:47:57 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 14:47:57 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 14:47:57 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 14:47:57 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 14:47:57 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 14:47:57 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 14:47:58 INFO  t.r.jwt.service.DatabaseInitService - Initializing database with domains, roles and users from configuration
2025-03-20 14:48:09 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "3c47e" for domain: sandcastle-auth
2025-03-20 14:48:12 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: sandcastle-auth
2025-03-20 14:48:13 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "44e27" for domain: app1
2025-03-20 14:48:13 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: app1
2025-03-20 14:48:14 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "8b3b3" for domain: default
2025-03-20 14:48:14 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: default
2025-03-20 14:48:14 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: sandcastle-auth
2025-03-20 14:48:14 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: app1
2025-03-20 14:48:14 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: USER in domain: app1
2025-03-20 14:48:14 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: MANAGER in domain: app1
2025-03-20 14:48:15 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using users pin from config "08fdd" for user authadmin in domain: sandcastle-auth
2025-03-20 14:48:15 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: authadmin in domain: sandcastle-auth
2025-03-20 14:48:15 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "44e27" for user admin1 in domain: app1
2025-03-20 14:48:16 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: admin1 in domain: app1
2025-03-20 14:48:16 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "44e27" for user user1 in domain: app1
2025-03-20 14:48:16 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user1 in domain: app1
2025-03-20 14:48:16 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "44e27" for user user2 in domain: app1
2025-03-20 14:48:16 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user2 in domain: app1
2025-03-20 14:48:16 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "44e27" for user user3 in domain: app1
2025-03-20 14:48:16 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user3 in domain: app1
2025-03-20 14:48:16 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "44e27" for user manager1 in domain: app1
2025-03-20 14:48:16 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: manager1 in domain: app1
2025-03-20 14:48:16 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-20 14:48:17 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7200702, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3eb29382, org.springframework.security.web.context.SecurityContextHolderFilter@5d51203b, org.springframework.security.web.header.HeaderWriterFilter@55e75ce0, org.springframework.security.web.authentication.logout.LogoutFilter@19faa9dc, tech.robd.jwt.filter.JwtAuthenticationFilter@286866cb, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@1695f7cb, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@23e54c8a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@276e5add, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@209baf91, org.springframework.security.web.access.ExceptionTranslationFilter@33a0b857, org.springframework.security.web.access.intercept.AuthorizationFilter@3c592c0c]
2025-03-20 14:48:18 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-18081"]
2025-03-20 14:48:18 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 18081 (http) with context path ''
2025-03-20 14:48:18 INFO  tech.robd.jwt.JwtAuthApplication - Started JwtAuthApplication in 29.753 seconds (process running for 31.331)
2025-03-20 14:48:27 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-20 14:48:27 INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-20 14:48:27 INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-03-20 14:48:27 DEBUG o.s.security.web.FilterChainProxy - Securing POST /authenticate
2025-03-20 14:48:30 DEBUG t.r.j.filter.JwtAuthenticationFilter - No JWT token found in request
2025-03-20 14:48:30 DEBUG o.s.security.web.FilterChainProxy - Secured POST /authenticate
2025-03-20 14:48:31 INFO  t.robd.jwt.controller.AuthController - Authentication request received for username: authadmin
2025-03-20 14:48:31 DEBUG tech.robd.jwt.service.UserService - Validating credentials for user: authadmin
2025-03-20 14:48:32 INFO  tech.robd.jwt.service.UserService - Credentials validated successfully for user: authadmin
2025-03-20 14:48:32 INFO  t.robd.jwt.controller.AuthController - Authentication successful for user 'authadmin'
2025-03-20 14:48:32 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-03-20 14:49:23 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 14:49:37 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 14:49:37 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-03-20 14:49:37 DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-03-20 14:49:37 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-03-20 14:49:37 DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost:18081/error?continue to session
2025-03-20 14:49:37 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2025-03-20 14:49:37 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@4b0950b1
2025-03-20 19:29:03 WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=29m37s146ms457s).
2025-03-20 21:04:44 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 21:04:44 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 21:04:44 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 21:05:14 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 38032 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 21:05:14 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 21:05:14 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 21:05:15 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 21:05:15 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 73 ms. Found 6 JPA repository interfaces.
2025-03-20 21:05:16 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 18081 (http)
2025-03-20 21:05:16 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-18081"]
2025-03-20 21:05:16 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 21:05:16 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 21:05:16 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 21:05:16 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2023 ms
2025-03-20 21:05:16 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 21:05:17 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 21:05:17 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 21:05:17 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 21:05:17 INFO  tech.robd.jwt.util.JwtTokenUtil - JWT secret key loaded from file successfully
2025-03-20 21:05:17 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 21:05:17 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 21:05:17 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 21:05:17 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 21:05:17 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 21:05:17 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 21:05:18 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 21:05:18 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 21:05:19 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 21:05:19 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 21:05:19 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 21:05:19 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 21:05:19 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 21:05:19 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 21:05:19 INFO  t.r.jwt.service.DatabaseInitService - Initializing database with domains, roles and users from configuration
2025-03-20 21:05:19 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "98e31" for domain: sandcastle-auth
2025-03-20 21:05:19 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: sandcastle-auth
2025-03-20 21:05:19 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "d3917" for domain: app1
2025-03-20 21:05:19 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: app1
2025-03-20 21:05:19 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "fd863" for domain: default
2025-03-20 21:05:19 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: default
2025-03-20 21:05:19 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: sandcastle-auth
2025-03-20 21:05:19 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: default
2025-03-20 21:05:19 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: app1
2025-03-20 21:05:19 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: USER in domain: app1
2025-03-20 21:05:19 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: MANAGER in domain: app1
2025-03-20 21:05:19 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using users pin from config "08fdd" for user authadmin in domain: sandcastle-auth
2025-03-20 21:05:20 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: authadmin in domain: sandcastle-auth
2025-03-20 21:05:20 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "d3917" for user admin1 in domain: app1
2025-03-20 21:05:20 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: admin1 in domain: app1
2025-03-20 21:05:20 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "d3917" for user user1 in domain: app1
2025-03-20 21:05:20 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user1 in domain: app1
2025-03-20 21:05:20 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "d3917" for user user2 in domain: app1
2025-03-20 21:05:20 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user2 in domain: app1
2025-03-20 21:05:20 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "d3917" for user user3 in domain: app1
2025-03-20 21:05:20 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user3 in domain: app1
2025-03-20 21:05:20 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "d3917" for user manager1 in domain: app1
2025-03-20 21:05:20 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: manager1 in domain: app1
2025-03-20 21:05:20 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-20 21:05:21 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2524f9bf, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7e2c8622, org.springframework.security.web.context.SecurityContextHolderFilter@7ae97a58, org.springframework.security.web.header.HeaderWriterFilter@19412eef, org.springframework.security.web.authentication.logout.LogoutFilter@5a35efac, tech.robd.jwt.filter.JwtAuthenticationFilter@8f2e3e6, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@62d72091, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@67544105, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6421e9e7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4b02dc4e, org.springframework.security.web.access.ExceptionTranslationFilter@63661fc7, org.springframework.security.web.access.intercept.AuthorizationFilter@1c10eb3a]
2025-03-20 21:05:21 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-18081"]
2025-03-20 21:05:21 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 18081 (http) with context path ''
2025-03-20 21:05:21 INFO  tech.robd.jwt.JwtAuthApplication - Started JwtAuthApplication in 9.105 seconds (process running for 12.029)
2025-03-20 21:05:41 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-20 21:05:41 INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-20 21:05:41 INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-03-20 21:05:41 DEBUG o.s.security.web.FilterChainProxy - Securing POST /authenticate
2025-03-20 21:05:41 DEBUG t.r.j.filter.JwtAuthenticationFilter - No JWT token found in request
2025-03-20 21:05:41 DEBUG o.s.security.web.FilterChainProxy - Secured POST /authenticate
2025-03-20 21:05:41 INFO  t.robd.jwt.controller.AuthController - Authentication request received for username: authadmin
2025-03-20 21:05:41 DEBUG tech.robd.jwt.service.UserService - Validating credentials for user: authadmin
2025-03-20 21:05:42 INFO  tech.robd.jwt.service.UserService - Credentials validated successfully for user: authadmin
2025-03-20 21:05:42 INFO  t.robd.jwt.controller.AuthController - Authentication successful for user 'authadmin'
2025-03-20 21:05:42 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-03-20 21:06:03 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 21:06:03 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 21:06:03 DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/isUserValid
2025-03-20 21:09:59 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 21:09:59 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 21:09:59 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 21:10:10 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 40264 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 21:10:10 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 21:10:10 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 21:10:11 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 21:10:12 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 87 ms. Found 6 JPA repository interfaces.
2025-03-20 21:10:12 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 18081 (http)
2025-03-20 21:10:12 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-18081"]
2025-03-20 21:10:12 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 21:10:12 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 21:10:12 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 21:10:12 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1905 ms
2025-03-20 21:10:13 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 21:10:13 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 21:10:13 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 21:10:13 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 21:10:13 INFO  tech.robd.jwt.util.JwtTokenUtil - JWT secret key loaded from file successfully
2025-03-20 21:10:13 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 21:10:13 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 21:10:13 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 21:10:13 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 21:10:13 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 21:10:13 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 21:10:14 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 21:10:14 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 21:10:14 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 21:10:14 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 21:10:14 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 21:10:14 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 21:10:14 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 21:10:14 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 21:10:15 INFO  t.r.jwt.service.DatabaseInitService - Initializing database with domains, roles and users from configuration
2025-03-20 21:10:15 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "b5381" for domain: sandcastle-auth
2025-03-20 21:10:15 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: sandcastle-auth
2025-03-20 21:10:15 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "87850" for domain: app1
2025-03-20 21:10:15 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: app1
2025-03-20 21:10:15 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "d2182" for domain: default
2025-03-20 21:10:15 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: default
2025-03-20 21:10:15 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: sandcastle-auth
2025-03-20 21:10:15 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: default
2025-03-20 21:10:15 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: app1
2025-03-20 21:10:15 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: USER in domain: app1
2025-03-20 21:10:15 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: MANAGER in domain: app1
2025-03-20 21:10:15 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using users pin from config "08fdd" for user authadmin in domain: sandcastle-auth
2025-03-20 21:10:15 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: authadmin in domain: sandcastle-auth
2025-03-20 21:10:15 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "87850" for user admin1 in domain: app1
2025-03-20 21:10:16 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: admin1 in domain: app1
2025-03-20 21:10:16 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "87850" for user user1 in domain: app1
2025-03-20 21:10:16 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user1 in domain: app1
2025-03-20 21:10:16 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "87850" for user user2 in domain: app1
2025-03-20 21:10:16 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user2 in domain: app1
2025-03-20 21:10:16 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "87850" for user user3 in domain: app1
2025-03-20 21:10:16 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user3 in domain: app1
2025-03-20 21:10:16 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "87850" for user manager1 in domain: app1
2025-03-20 21:10:16 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: manager1 in domain: app1
2025-03-20 21:10:16 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-20 21:10:16 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3ede428e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@70a8654, org.springframework.security.web.context.SecurityContextHolderFilter@22f1a340, org.springframework.security.web.header.HeaderWriterFilter@4d5d945d, org.springframework.security.web.authentication.logout.LogoutFilter@2fda92e0, tech.robd.jwt.filter.JwtAuthenticationFilter@4168f3d9, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@5fdcc63f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7aa5292d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@25291901, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@671c71e8, org.springframework.security.web.access.ExceptionTranslationFilter@4c69b396, org.springframework.security.web.access.intercept.AuthorizationFilter@66e44f9f]
2025-03-20 21:10:17 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-18081"]
2025-03-20 21:10:17 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 18081 (http) with context path ''
2025-03-20 21:10:17 INFO  tech.robd.jwt.JwtAuthApplication - Started JwtAuthApplication in 8.407 seconds (process running for 11.584)
2025-03-20 21:10:25 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-20 21:10:25 INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-20 21:10:25 INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-03-20 21:10:25 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 21:10:25 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 21:10:25 DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/isUserValid
2025-03-20 21:11:34 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 21:11:34 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 21:11:34 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 21:11:42 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 28180 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 21:11:42 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 21:11:42 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 21:11:43 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 21:11:43 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 83 ms. Found 6 JPA repository interfaces.
2025-03-20 21:11:44 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 18081 (http)
2025-03-20 21:11:44 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-18081"]
2025-03-20 21:11:44 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 21:11:44 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 21:11:44 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 21:11:44 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1926 ms
2025-03-20 21:11:44 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 21:11:44 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 21:11:44 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 21:11:44 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 21:11:45 INFO  tech.robd.jwt.util.JwtTokenUtil - JWT secret key loaded from file successfully
2025-03-20 21:11:45 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 21:11:45 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 21:11:45 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 21:11:45 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 21:11:45 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 21:11:45 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 21:11:45 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 21:11:46 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 21:11:46 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 21:11:46 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 21:11:46 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 21:11:46 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 21:11:46 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 21:11:46 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 21:11:47 INFO  t.r.jwt.service.DatabaseInitService - Initializing database with domains, roles and users from configuration
2025-03-20 21:11:47 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "3b5b7" for domain: sandcastle-auth
2025-03-20 21:11:47 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: sandcastle-auth
2025-03-20 21:11:47 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "6936d" for domain: app1
2025-03-20 21:11:47 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: app1
2025-03-20 21:11:47 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "ddb86" for domain: default
2025-03-20 21:11:47 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: default
2025-03-20 21:11:47 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: sandcastle-auth
2025-03-20 21:11:47 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: default
2025-03-20 21:11:47 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: app1
2025-03-20 21:11:47 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: USER in domain: app1
2025-03-20 21:11:47 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: MANAGER in domain: app1
2025-03-20 21:11:47 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using users pin from config "08fdd" for user authadmin in domain: sandcastle-auth
2025-03-20 21:11:47 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: authadmin in domain: sandcastle-auth
2025-03-20 21:11:47 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "6936d" for user admin1 in domain: app1
2025-03-20 21:11:47 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: admin1 in domain: app1
2025-03-20 21:11:47 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "6936d" for user user1 in domain: app1
2025-03-20 21:11:48 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user1 in domain: app1
2025-03-20 21:11:48 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "6936d" for user user2 in domain: app1
2025-03-20 21:11:48 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user2 in domain: app1
2025-03-20 21:11:48 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "6936d" for user user3 in domain: app1
2025-03-20 21:11:48 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user3 in domain: app1
2025-03-20 21:11:48 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "6936d" for user manager1 in domain: app1
2025-03-20 21:11:48 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: manager1 in domain: app1
2025-03-20 21:11:48 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-20 21:11:48 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@70a8654, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@671c71e8, org.springframework.security.web.context.SecurityContextHolderFilter@32f243f, org.springframework.security.web.header.HeaderWriterFilter@60c33609, org.springframework.security.web.authentication.logout.LogoutFilter@535adf36, tech.robd.jwt.filter.JwtAuthenticationFilter@74b00247, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@27f8f1cc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@25291901, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@a6d4547, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7d5176d6, org.springframework.security.web.access.ExceptionTranslationFilter@49314684, org.springframework.security.web.access.intercept.AuthorizationFilter@79f82fc4]
2025-03-20 21:11:49 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-18081"]
2025-03-20 21:11:49 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 18081 (http) with context path ''
2025-03-20 21:11:49 INFO  tech.robd.jwt.JwtAuthApplication - Started JwtAuthApplication in 7.84 seconds (process running for 8.916)
2025-03-20 21:11:56 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-20 21:11:56 INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-20 21:11:56 INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-03-20 21:11:56 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 21:11:56 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 21:11:56 DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/isUserValid
2025-03-20 21:12:08 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 21:12:08 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 21:12:08 DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/isUserValid
2025-03-20 21:12:10 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 21:12:10 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 21:12:10 DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/isUserValid
2025-03-20 21:12:11 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 21:12:11 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 21:12:11 DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/isUserValid
2025-03-20 21:12:12 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 21:12:12 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 21:12:12 DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/isUserValid
2025-03-20 21:12:45 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 21:12:45 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 21:12:45 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 21:12:53 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 37972 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 21:12:53 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 21:12:53 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 21:12:55 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 21:12:55 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 100 ms. Found 6 JPA repository interfaces.
2025-03-20 21:12:55 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 18081 (http)
2025-03-20 21:12:55 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-18081"]
2025-03-20 21:12:55 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 21:12:55 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 21:12:56 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 21:12:56 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1977 ms
2025-03-20 21:12:56 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 21:12:56 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 21:12:56 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 21:12:56 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 21:12:56 INFO  tech.robd.jwt.util.JwtTokenUtil - JWT secret key loaded from file successfully
2025-03-20 21:12:56 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 21:12:56 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 21:12:56 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 21:12:56 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 21:12:56 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 21:12:56 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 21:12:57 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 21:12:58 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 21:12:58 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 21:12:58 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 21:12:58 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 21:12:58 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 21:12:58 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 21:12:58 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 21:12:58 INFO  t.r.jwt.service.DatabaseInitService - Initializing database with domains, roles and users from configuration
2025-03-20 21:12:58 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "06468" for domain: sandcastle-auth
2025-03-20 21:12:58 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: sandcastle-auth
2025-03-20 21:12:58 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "a9726" for domain: app1
2025-03-20 21:12:58 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: app1
2025-03-20 21:12:58 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "6d29e" for domain: default
2025-03-20 21:12:58 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: default
2025-03-20 21:12:58 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: sandcastle-auth
2025-03-20 21:12:58 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: default
2025-03-20 21:12:58 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: app1
2025-03-20 21:12:58 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: USER in domain: app1
2025-03-20 21:12:58 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: MANAGER in domain: app1
2025-03-20 21:12:59 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using users pin from config "08fdd" for user authadmin in domain: sandcastle-auth
2025-03-20 21:12:59 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: authadmin in domain: sandcastle-auth
2025-03-20 21:12:59 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "a9726" for user admin1 in domain: app1
2025-03-20 21:12:59 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: admin1 in domain: app1
2025-03-20 21:12:59 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "a9726" for user user1 in domain: app1
2025-03-20 21:12:59 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user1 in domain: app1
2025-03-20 21:12:59 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "a9726" for user user2 in domain: app1
2025-03-20 21:12:59 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user2 in domain: app1
2025-03-20 21:12:59 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "a9726" for user user3 in domain: app1
2025-03-20 21:12:59 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user3 in domain: app1
2025-03-20 21:12:59 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "a9726" for user manager1 in domain: app1
2025-03-20 21:12:59 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: manager1 in domain: app1
2025-03-20 21:12:59 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-20 21:13:00 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4eb69e8d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@78fd1179, org.springframework.security.web.context.SecurityContextHolderFilter@24244ea, org.springframework.security.web.header.HeaderWriterFilter@6421e9e7, org.springframework.security.web.authentication.logout.LogoutFilter@523e019c, tech.robd.jwt.filter.JwtAuthenticationFilter@5e9bf744, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@b67b359, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@67c61551, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7bca98d5, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@13cec4ff, org.springframework.security.web.access.ExceptionTranslationFilter@6a4f15bc, org.springframework.security.web.access.intercept.AuthorizationFilter@7d619bcb]
2025-03-20 21:13:00 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-18081"]
2025-03-20 21:13:00 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 18081 (http) with context path ''
2025-03-20 21:13:00 INFO  tech.robd.jwt.JwtAuthApplication - Started JwtAuthApplication in 7.984 seconds (process running for 9.404)
2025-03-20 21:13:04 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-20 21:13:04 INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-20 21:13:04 INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-03-20 21:13:04 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 21:13:04 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 21:13:04 DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/isUserValid
2025-03-20 21:13:24 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 21:13:24 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 21:13:24 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 21:13:31 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 35772 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 21:13:31 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 21:13:31 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 21:13:33 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 21:13:33 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 81 ms. Found 6 JPA repository interfaces.
2025-03-20 21:13:33 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 18081 (http)
2025-03-20 21:13:33 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-18081"]
2025-03-20 21:13:33 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 21:13:33 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 21:13:33 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 21:13:33 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2123 ms
2025-03-20 21:13:34 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 21:13:34 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 21:13:34 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 21:13:34 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 21:13:34 INFO  tech.robd.jwt.util.JwtTokenUtil - JWT secret key loaded from file successfully
2025-03-20 21:13:34 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 21:13:34 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 21:13:34 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 21:13:34 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 21:13:34 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 21:13:34 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 21:13:35 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 21:13:35 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 21:13:36 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 21:13:36 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 21:13:36 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 21:13:36 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 21:13:36 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 21:13:36 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 21:13:36 INFO  t.r.jwt.service.DatabaseInitService - Initializing database with domains, roles and users from configuration
2025-03-20 21:13:36 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "1fb9b" for domain: sandcastle-auth
2025-03-20 21:13:36 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: sandcastle-auth
2025-03-20 21:13:36 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "38e9d" for domain: app1
2025-03-20 21:13:36 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: app1
2025-03-20 21:13:36 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "af79f" for domain: default
2025-03-20 21:13:36 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: default
2025-03-20 21:13:36 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: sandcastle-auth
2025-03-20 21:13:36 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: default
2025-03-20 21:13:36 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: app1
2025-03-20 21:13:36 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: USER in domain: app1
2025-03-20 21:13:36 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: MANAGER in domain: app1
2025-03-20 21:13:36 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using users pin from config "08fdd" for user authadmin in domain: sandcastle-auth
2025-03-20 21:13:36 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: authadmin in domain: sandcastle-auth
2025-03-20 21:13:36 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "38e9d" for user admin1 in domain: app1
2025-03-20 21:13:37 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: admin1 in domain: app1
2025-03-20 21:13:37 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "38e9d" for user user1 in domain: app1
2025-03-20 21:13:37 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user1 in domain: app1
2025-03-20 21:13:37 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "38e9d" for user user2 in domain: app1
2025-03-20 21:13:37 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user2 in domain: app1
2025-03-20 21:13:37 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "38e9d" for user user3 in domain: app1
2025-03-20 21:13:37 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user3 in domain: app1
2025-03-20 21:13:37 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "38e9d" for user manager1 in domain: app1
2025-03-20 21:13:37 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: manager1 in domain: app1
2025-03-20 21:13:37 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-20 21:13:37 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7e2c8622, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4b02dc4e, org.springframework.security.web.context.SecurityContextHolderFilter@6a4f15bc, org.springframework.security.web.header.HeaderWriterFilter@542b27af, org.springframework.security.web.authentication.logout.LogoutFilter@70d24586, tech.robd.jwt.filter.JwtAuthenticationFilter@48cdb156, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@76a86677, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6421e9e7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@552b7481, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@b67b359, org.springframework.security.web.access.ExceptionTranslationFilter@65130cf2, org.springframework.security.web.access.intercept.AuthorizationFilter@49f32bcb]
2025-03-20 21:13:38 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-18081"]
2025-03-20 21:13:38 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 18081 (http) with context path ''
2025-03-20 21:13:38 INFO  tech.robd.jwt.JwtAuthApplication - Started JwtAuthApplication in 8.019 seconds (process running for 9.342)
2025-03-20 21:13:46 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-20 21:13:46 INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-20 21:13:46 INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-03-20 21:13:46 DEBUG o.s.security.web.FilterChainProxy - Securing POST /authenticate
2025-03-20 21:13:46 DEBUG t.r.j.filter.JwtAuthenticationFilter - No JWT token found in request
2025-03-20 21:13:46 DEBUG o.s.security.web.FilterChainProxy - Secured POST /authenticate
2025-03-20 21:13:46 INFO  t.robd.jwt.controller.AuthController - Authentication request received for username: authadmin
2025-03-20 21:13:46 DEBUG tech.robd.jwt.service.UserService - Validating credentials for user: authadmin
2025-03-20 21:13:47 INFO  tech.robd.jwt.service.UserService - Credentials validated successfully for user: authadmin
2025-03-20 21:13:47 INFO  t.robd.jwt.controller.AuthController - Authentication successful for user 'authadmin'
2025-03-20 21:13:47 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-03-20 21:13:59 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 21:13:59 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 21:13:59 DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/isUserValid
2025-03-20 21:15:56 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 21:15:56 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 21:15:56 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 21:16:02 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 16360 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 21:16:02 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 21:16:02 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 21:16:03 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 21:16:04 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 78 ms. Found 6 JPA repository interfaces.
2025-03-20 21:16:04 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 18081 (http)
2025-03-20 21:16:04 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-18081"]
2025-03-20 21:16:04 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 21:16:04 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 21:16:04 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 21:16:04 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1930 ms
2025-03-20 21:16:04 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 21:16:05 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 21:16:05 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 21:16:05 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 21:16:05 INFO  tech.robd.jwt.util.JwtTokenUtil - JWT secret key loaded from file successfully
2025-03-20 21:16:05 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 21:16:05 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 21:16:05 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 21:16:05 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 21:16:05 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 21:16:05 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 21:16:06 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 21:16:06 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 21:16:06 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 21:16:06 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 21:16:06 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 21:16:06 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 21:16:06 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 21:16:06 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 21:16:07 INFO  t.r.jwt.service.DatabaseInitService - Initializing database with domains, roles and users from configuration
2025-03-20 21:16:07 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "79fcc" for domain: sandcastle-auth
2025-03-20 21:16:07 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: sandcastle-auth
2025-03-20 21:16:07 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "cffb3" for domain: app1
2025-03-20 21:16:07 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: app1
2025-03-20 21:16:07 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "4fe5a" for domain: default
2025-03-20 21:16:07 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: default
2025-03-20 21:16:07 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: sandcastle-auth
2025-03-20 21:16:07 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: default
2025-03-20 21:16:07 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: app1
2025-03-20 21:16:07 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: USER in domain: app1
2025-03-20 21:16:07 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: MANAGER in domain: app1
2025-03-20 21:16:07 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using users pin from config "08fdd" for user authadmin in domain: sandcastle-auth
2025-03-20 21:16:07 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: authadmin in domain: sandcastle-auth
2025-03-20 21:16:07 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "cffb3" for user admin1 in domain: app1
2025-03-20 21:16:08 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: admin1 in domain: app1
2025-03-20 21:16:08 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "cffb3" for user user1 in domain: app1
2025-03-20 21:16:08 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user1 in domain: app1
2025-03-20 21:16:08 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "cffb3" for user user2 in domain: app1
2025-03-20 21:16:08 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user2 in domain: app1
2025-03-20 21:16:08 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "cffb3" for user user3 in domain: app1
2025-03-20 21:16:08 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user3 in domain: app1
2025-03-20 21:16:08 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "cffb3" for user manager1 in domain: app1
2025-03-20 21:16:08 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: manager1 in domain: app1
2025-03-20 21:16:08 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-20 21:16:08 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4b02dc4e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@b67b359, org.springframework.security.web.context.SecurityContextHolderFilter@67544105, org.springframework.security.web.header.HeaderWriterFilter@7e092ca, org.springframework.security.web.authentication.logout.LogoutFilter@58e9e852, tech.robd.jwt.filter.JwtAuthenticationFilter@3b170235, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@3b863b4, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@552b7481, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@475b796d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@98c4a8b, org.springframework.security.web.access.ExceptionTranslationFilter@19412eef, org.springframework.security.web.access.intercept.AuthorizationFilter@1af29a19]
2025-03-20 21:16:09 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-18081"]
2025-03-20 21:16:09 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 18081 (http) with context path ''
2025-03-20 21:16:09 INFO  tech.robd.jwt.JwtAuthApplication - Started JwtAuthApplication in 7.775 seconds (process running for 9.024)
2025-03-20 21:16:47 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-20 21:16:47 INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-20 21:16:47 INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-03-20 21:16:47 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 21:16:47 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 21:16:47 DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/isUserValid
2025-03-20 21:16:53 DEBUG o.s.security.web.FilterChainProxy - Securing POST /authenticate
2025-03-20 21:16:53 DEBUG t.r.j.filter.JwtAuthenticationFilter - No JWT token found in request
2025-03-20 21:16:53 DEBUG o.s.security.web.FilterChainProxy - Secured POST /authenticate
2025-03-20 21:16:53 INFO  t.robd.jwt.controller.AuthController - Authentication request received for username: authadmin
2025-03-20 21:16:53 DEBUG tech.robd.jwt.service.UserService - Validating credentials for user: authadmin
2025-03-20 21:16:54 INFO  tech.robd.jwt.service.UserService - Credentials validated successfully for user: authadmin
2025-03-20 21:16:54 INFO  t.robd.jwt.controller.AuthController - Authentication successful for user 'authadmin'
2025-03-20 21:16:54 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-03-20 21:17:00 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 21:17:00 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 21:17:00 DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/isUserValid
2025-03-20 21:20:19 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 21:20:19 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 21:20:19 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 21:20:34 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 13232 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 21:20:34 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 21:20:34 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 21:20:35 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 21:20:35 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 112 ms. Found 6 JPA repository interfaces.
2025-03-20 21:20:37 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 18081 (http)
2025-03-20 21:20:37 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-18081"]
2025-03-20 21:20:37 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 21:20:37 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 21:20:37 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 21:20:37 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2992 ms
2025-03-20 21:20:37 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 21:20:37 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 21:20:37 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 21:20:37 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 21:20:37 INFO  tech.robd.jwt.util.JwtTokenUtil - JWT secret key loaded from file successfully
2025-03-20 21:20:37 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 21:20:37 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 21:20:37 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 21:20:37 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 21:20:38 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 21:20:38 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 21:20:38 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 21:20:39 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 21:20:39 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 21:20:39 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 21:20:39 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 21:20:39 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 21:20:39 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 21:20:39 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 21:20:40 INFO  t.r.jwt.service.DatabaseInitService - Initializing database with domains, roles and users from configuration
2025-03-20 21:20:40 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "833d3" for domain: sandcastle-auth
2025-03-20 21:20:40 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: sandcastle-auth
2025-03-20 21:20:40 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "6b63a" for domain: app1
2025-03-20 21:20:40 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: app1
2025-03-20 21:20:40 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "845e4" for domain: default
2025-03-20 21:20:40 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: default
2025-03-20 21:20:40 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: sandcastle-auth
2025-03-20 21:20:40 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: default
2025-03-20 21:20:40 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: app1
2025-03-20 21:20:40 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: USER in domain: app1
2025-03-20 21:20:40 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: MANAGER in domain: app1
2025-03-20 21:20:40 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using users pin from config "08fdd" for user authadmin in domain: sandcastle-auth
2025-03-20 21:20:40 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: authadmin in domain: sandcastle-auth
2025-03-20 21:20:40 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "6b63a" for user admin1 in domain: app1
2025-03-20 21:20:40 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: admin1 in domain: app1
2025-03-20 21:20:40 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "6b63a" for user user1 in domain: app1
2025-03-20 21:20:40 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user1 in domain: app1
2025-03-20 21:20:40 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "6b63a" for user user2 in domain: app1
2025-03-20 21:20:40 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user2 in domain: app1
2025-03-20 21:20:40 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "6b63a" for user user3 in domain: app1
2025-03-20 21:20:41 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user3 in domain: app1
2025-03-20 21:20:41 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "6b63a" for user manager1 in domain: app1
2025-03-20 21:20:41 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: manager1 in domain: app1
2025-03-20 21:20:41 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-20 21:20:41 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@456beb8b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@191cf38f, org.springframework.security.web.context.SecurityContextHolderFilter@3fbf66e7, org.springframework.security.web.header.HeaderWriterFilter@72b4ecb2, org.springframework.security.web.authentication.logout.LogoutFilter@13cec4ff, tech.robd.jwt.filter.JwtAuthenticationFilter@7ac48f05, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@45f32b12, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@41ad6c00, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2a10407e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2dc54b50, org.springframework.security.web.access.ExceptionTranslationFilter@18f1631c, org.springframework.security.web.access.intercept.AuthorizationFilter@6db84cae]
2025-03-20 21:20:42 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-18081"]
2025-03-20 21:20:42 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 18081 (http) with context path ''
2025-03-20 21:20:42 INFO  tech.robd.jwt.JwtAuthApplication - Started JwtAuthApplication in 9.661 seconds (process running for 10.934)
2025-03-20 21:20:49 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-20 21:20:49 INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-20 21:20:49 INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-03-20 21:20:49 DEBUG o.s.security.web.FilterChainProxy - Securing POST /authenticate
2025-03-20 21:20:49 DEBUG t.r.j.filter.JwtAuthenticationFilter - No JWT token found in request
2025-03-20 21:20:49 DEBUG o.s.security.web.FilterChainProxy - Secured POST /authenticate
2025-03-20 21:20:50 INFO  t.robd.jwt.controller.AuthController - Authentication request received for username: authadmin
2025-03-20 21:20:50 DEBUG tech.robd.jwt.service.UserService - Validating credentials for user: authadmin
2025-03-20 21:20:50 INFO  tech.robd.jwt.service.UserService - Credentials validated successfully for user: authadmin
2025-03-20 21:20:50 INFO  t.robd.jwt.controller.AuthController - Authentication successful for user 'authadmin'
2025-03-20 21:20:50 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-03-20 21:21:00 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 21:21:00 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 21:21:00 DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/isUserValid
2025-03-20 21:21:34 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 21:21:34 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 21:21:34 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 21:21:42 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 17632 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 21:21:42 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 21:21:42 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 21:21:43 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 21:21:44 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 73 ms. Found 6 JPA repository interfaces.
2025-03-20 21:21:44 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 18081 (http)
2025-03-20 21:21:44 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-18081"]
2025-03-20 21:21:44 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 21:21:44 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 21:21:44 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 21:21:44 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1991 ms
2025-03-20 21:21:44 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 21:21:45 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 21:21:45 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 21:21:45 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 21:21:45 INFO  tech.robd.jwt.util.JwtTokenUtil - JWT secret key loaded from file successfully
2025-03-20 21:21:45 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 21:21:45 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 21:21:45 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 21:21:45 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 21:21:45 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 21:21:45 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 21:21:45 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 21:21:46 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 21:21:46 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 21:21:46 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 21:21:46 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 21:21:46 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 21:21:46 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 21:21:46 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 21:21:47 INFO  t.r.jwt.service.DatabaseInitService - Initializing database with domains, roles and users from configuration
2025-03-20 21:21:47 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "55a6d" for domain: sandcastle-auth
2025-03-20 21:21:47 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: sandcastle-auth
2025-03-20 21:21:47 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "344f0" for domain: app1
2025-03-20 21:21:47 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: app1
2025-03-20 21:21:47 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "7631c" for domain: default
2025-03-20 21:21:47 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: default
2025-03-20 21:21:47 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: sandcastle-auth
2025-03-20 21:21:47 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: default
2025-03-20 21:21:47 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: app1
2025-03-20 21:21:47 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: USER in domain: app1
2025-03-20 21:21:47 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: MANAGER in domain: app1
2025-03-20 21:21:47 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using users pin from config "08fdd" for user authadmin in domain: sandcastle-auth
2025-03-20 21:21:47 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: authadmin in domain: sandcastle-auth
2025-03-20 21:21:47 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "344f0" for user admin1 in domain: app1
2025-03-20 21:21:48 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: admin1 in domain: app1
2025-03-20 21:21:48 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "344f0" for user user1 in domain: app1
2025-03-20 21:21:48 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user1 in domain: app1
2025-03-20 21:21:48 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "344f0" for user user2 in domain: app1
2025-03-20 21:21:48 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user2 in domain: app1
2025-03-20 21:21:48 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "344f0" for user user3 in domain: app1
2025-03-20 21:21:48 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user3 in domain: app1
2025-03-20 21:21:48 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "344f0" for user manager1 in domain: app1
2025-03-20 21:21:48 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: manager1 in domain: app1
2025-03-20 21:21:48 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-20 21:21:48 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@71eead09, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@586af46, org.springframework.security.web.context.SecurityContextHolderFilter@578ac0be, org.springframework.security.web.header.HeaderWriterFilter@2226fd2b, org.springframework.security.web.authentication.logout.LogoutFilter@1a13b5c1, tech.robd.jwt.filter.JwtAuthenticationFilter@250d440, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@2c1b10f2, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7b5e5fa, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@24caa80, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1267adbe, org.springframework.security.web.access.ExceptionTranslationFilter@7c0ecdbf, org.springframework.security.web.access.intercept.AuthorizationFilter@69c7eafd]
2025-03-20 21:21:49 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-18081"]
2025-03-20 21:21:49 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 18081 (http) with context path ''
2025-03-20 21:21:49 INFO  tech.robd.jwt.JwtAuthApplication - Started JwtAuthApplication in 8.206 seconds (process running for 11.199)
2025-03-20 21:22:16 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-20 21:22:16 INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-20 21:22:16 INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-03-20 21:22:16 DEBUG o.s.security.web.FilterChainProxy - Securing POST /authenticate
2025-03-20 21:22:16 DEBUG t.r.j.filter.JwtAuthenticationFilter - No JWT token found in request
2025-03-20 21:22:16 DEBUG o.s.security.web.FilterChainProxy - Secured POST /authenticate
2025-03-20 21:22:16 INFO  t.robd.jwt.controller.AuthController - Authentication request received for username: authadmin
2025-03-20 21:22:16 DEBUG tech.robd.jwt.service.UserService - Validating credentials for user: authadmin
2025-03-20 21:22:16 INFO  tech.robd.jwt.service.UserService - Credentials validated successfully for user: authadmin
2025-03-20 21:22:16 INFO  t.robd.jwt.controller.AuthController - Authentication successful for user 'authadmin'
2025-03-20 21:22:16 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-03-20 21:22:21 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 21:22:21 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 21:22:21 DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/isUserValid
2025-03-20 21:24:03 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 21:24:04 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 21:24:04 DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/isUserValid
2025-03-20 21:24:08 DEBUG o.s.security.web.FilterChainProxy - Securing POST /authenticate
2025-03-20 21:24:08 DEBUG t.r.j.filter.JwtAuthenticationFilter - No JWT token found in request
2025-03-20 21:24:08 DEBUG o.s.security.web.FilterChainProxy - Secured POST /authenticate
2025-03-20 21:24:08 INFO  t.robd.jwt.controller.AuthController - Authentication request received for username: authadmin
2025-03-20 21:24:08 DEBUG tech.robd.jwt.service.UserService - Validating credentials for user: authadmin
2025-03-20 21:24:08 INFO  tech.robd.jwt.service.UserService - Credentials validated successfully for user: authadmin
2025-03-20 21:24:08 INFO  t.robd.jwt.controller.AuthController - Authentication successful for user 'authadmin'
2025-03-20 21:24:08 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-03-20 21:24:13 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 21:24:13 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 21:24:13 DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/isUserValid
2025-03-20 21:24:56 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 21:24:56 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 21:24:56 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 21:25:04 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 5368 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 21:25:04 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 21:25:04 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 21:25:05 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 21:25:05 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 95 ms. Found 6 JPA repository interfaces.
2025-03-20 21:25:06 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 18081 (http)
2025-03-20 21:25:06 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-18081"]
2025-03-20 21:25:06 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 21:25:06 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 21:25:06 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 21:25:06 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2028 ms
2025-03-20 21:25:06 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 21:25:06 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 21:25:06 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 21:25:06 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 21:25:06 INFO  tech.robd.jwt.util.JwtTokenUtil - JWT secret key loaded from file successfully
2025-03-20 21:25:06 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 21:25:06 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 21:25:06 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 21:25:06 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 21:25:06 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 21:25:07 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 21:25:07 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 21:25:08 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 21:25:08 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 21:25:08 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 21:25:08 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 21:25:08 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 21:25:08 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 21:25:08 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 21:25:08 INFO  t.r.jwt.service.DatabaseInitService - Initializing database with domains, roles and users from configuration
2025-03-20 21:25:08 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "84851" for domain: sandcastle-auth
2025-03-20 21:25:09 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: sandcastle-auth
2025-03-20 21:25:09 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "461d0" for domain: app1
2025-03-20 21:25:09 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: app1
2025-03-20 21:25:09 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "36cbf" for domain: default
2025-03-20 21:25:09 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: default
2025-03-20 21:25:09 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: sandcastle-auth
2025-03-20 21:25:09 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: default
2025-03-20 21:25:09 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: app1
2025-03-20 21:25:09 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: USER in domain: app1
2025-03-20 21:25:09 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: MANAGER in domain: app1
2025-03-20 21:25:09 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using users pin from config "08fdd" for user authadmin in domain: sandcastle-auth
2025-03-20 21:25:09 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: authadmin in domain: sandcastle-auth
2025-03-20 21:25:09 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "461d0" for user admin1 in domain: app1
2025-03-20 21:25:09 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: admin1 in domain: app1
2025-03-20 21:25:09 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "461d0" for user user1 in domain: app1
2025-03-20 21:25:09 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user1 in domain: app1
2025-03-20 21:25:09 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "461d0" for user user2 in domain: app1
2025-03-20 21:25:09 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user2 in domain: app1
2025-03-20 21:25:09 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "461d0" for user user3 in domain: app1
2025-03-20 21:25:09 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user3 in domain: app1
2025-03-20 21:25:09 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "461d0" for user manager1 in domain: app1
2025-03-20 21:25:09 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: manager1 in domain: app1
2025-03-20 21:25:09 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-20 21:25:10 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2e68bd3d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2fda92e0, org.springframework.security.web.context.SecurityContextHolderFilter@74fda9ed, org.springframework.security.web.header.HeaderWriterFilter@7385a72f, org.springframework.security.web.authentication.logout.LogoutFilter@59e67a18, tech.robd.jwt.filter.JwtAuthenticationFilter@4c38cd16, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@5f3bc119, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7ca2319f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@653a5a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@535adf36, org.springframework.security.web.access.ExceptionTranslationFilter@4628f386, org.springframework.security.web.access.intercept.AuthorizationFilter@1d7f2719]
2025-03-20 21:25:11 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-18081"]
2025-03-20 21:25:11 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 18081 (http) with context path ''
2025-03-20 21:25:11 INFO  tech.robd.jwt.JwtAuthApplication - Started JwtAuthApplication in 8.614 seconds (process running for 11.232)
2025-03-20 21:26:05 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 21:26:05 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 21:26:05 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 21:26:11 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 24860 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 21:26:11 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 21:26:11 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 21:26:12 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 21:26:12 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 81 ms. Found 6 JPA repository interfaces.
2025-03-20 21:26:13 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 18081 (http)
2025-03-20 21:26:13 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-18081"]
2025-03-20 21:26:13 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 21:26:13 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 21:26:13 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 21:26:13 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2102 ms
2025-03-20 21:26:13 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 21:26:13 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 21:26:13 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 21:26:13 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 21:26:13 INFO  tech.robd.jwt.util.JwtTokenUtil - JWT secret key loaded from file successfully
2025-03-20 21:26:13 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 21:26:13 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 21:26:14 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 21:26:14 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 21:26:14 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 21:26:14 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 21:26:14 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 21:26:15 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 21:26:15 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 21:26:15 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 21:26:15 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 21:26:15 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 21:26:15 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 21:26:15 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 21:26:16 INFO  t.r.jwt.service.DatabaseInitService - Initializing database with domains, roles and users from configuration
2025-03-20 21:26:16 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "dd5d4" for domain: sandcastle-auth
2025-03-20 21:26:16 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: sandcastle-auth
2025-03-20 21:26:16 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "836ff" for domain: app1
2025-03-20 21:26:16 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: app1
2025-03-20 21:26:16 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "4e8c5" for domain: default
2025-03-20 21:26:16 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: default
2025-03-20 21:26:16 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: sandcastle-auth
2025-03-20 21:26:16 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: default
2025-03-20 21:26:16 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: app1
2025-03-20 21:26:16 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: USER in domain: app1
2025-03-20 21:26:16 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: MANAGER in domain: app1
2025-03-20 21:26:16 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using users pin from config "08fdd" for user authadmin in domain: sandcastle-auth
2025-03-20 21:26:16 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: authadmin in domain: sandcastle-auth
2025-03-20 21:26:16 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "836ff" for user admin1 in domain: app1
2025-03-20 21:26:16 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: admin1 in domain: app1
2025-03-20 21:26:16 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "836ff" for user user1 in domain: app1
2025-03-20 21:26:16 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user1 in domain: app1
2025-03-20 21:26:16 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "836ff" for user user2 in domain: app1
2025-03-20 21:26:16 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user2 in domain: app1
2025-03-20 21:26:16 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "836ff" for user user3 in domain: app1
2025-03-20 21:26:17 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user3 in domain: app1
2025-03-20 21:26:17 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "836ff" for user manager1 in domain: app1
2025-03-20 21:26:17 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: manager1 in domain: app1
2025-03-20 21:26:17 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-20 21:26:17 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@b67b359, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@98c4a8b, org.springframework.security.web.context.SecurityContextHolderFilter@6421e9e7, org.springframework.security.web.header.HeaderWriterFilter@7ae97a58, org.springframework.security.web.authentication.logout.LogoutFilter@52238861, tech.robd.jwt.filter.JwtAuthenticationFilter@3b170235, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@2524f9bf, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@475b796d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@24244ea, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@130bd00e, org.springframework.security.web.access.ExceptionTranslationFilter@542b27af, org.springframework.security.web.access.intercept.AuthorizationFilter@38624a3a]
2025-03-20 21:26:18 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-18081"]
2025-03-20 21:26:18 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 18081 (http) with context path ''
2025-03-20 21:26:18 INFO  tech.robd.jwt.JwtAuthApplication - Started JwtAuthApplication in 8.189 seconds (process running for 9.364)
2025-03-20 21:26:22 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-20 21:26:22 INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-20 21:26:22 INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-03-20 21:26:22 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 21:26:22 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 21:26:22 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-03-20 21:26:22 DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-03-20 21:26:22 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-03-20 21:26:22 DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost:18081/error?continue to session
2025-03-20 21:26:22 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2025-03-20 21:26:22 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@11a877a9
2025-03-20 21:26:28 DEBUG o.s.security.web.FilterChainProxy - Securing POST /authenticate
2025-03-20 21:26:28 DEBUG t.r.j.filter.JwtAuthenticationFilter - No JWT token found in request
2025-03-20 21:26:28 DEBUG o.s.security.web.FilterChainProxy - Secured POST /authenticate
2025-03-20 21:26:28 INFO  t.robd.jwt.controller.AuthController - Authentication request received for username: authadmin
2025-03-20 21:26:28 DEBUG tech.robd.jwt.service.UserService - Validating credentials for user: authadmin
2025-03-20 21:26:29 INFO  tech.robd.jwt.service.UserService - Credentials validated successfully for user: authadmin
2025-03-20 21:26:29 INFO  t.robd.jwt.controller.AuthController - Authentication successful for user 'authadmin'
2025-03-20 21:26:29 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-03-20 21:26:53 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 21:26:53 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 21:26:53 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-03-20 21:26:53 DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-03-20 21:26:53 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-03-20 21:26:53 DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost:18081/error?continue to session
2025-03-20 21:26:53 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2025-03-20 21:26:53 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@11a877a9
2025-03-20 21:29:48 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 21:29:48 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 21:29:48 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 21:29:54 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 35704 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 21:29:54 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 21:29:54 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 21:29:56 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 21:29:56 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 99 ms. Found 6 JPA repository interfaces.
2025-03-20 21:29:56 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 18081 (http)
2025-03-20 21:29:56 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-18081"]
2025-03-20 21:29:56 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 21:29:56 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 21:29:57 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 21:29:57 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2153 ms
2025-03-20 21:29:57 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 21:29:57 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 21:29:57 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 21:29:57 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 21:29:57 INFO  tech.robd.jwt.util.JwtTokenUtil - JWT secret key loaded from file successfully
2025-03-20 21:29:57 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 21:29:57 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 21:29:57 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 21:29:57 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 21:29:57 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 21:29:58 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 21:29:58 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 21:29:59 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 21:29:59 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 21:29:59 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 21:29:59 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 21:29:59 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 21:29:59 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 21:29:59 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 21:30:00 INFO  t.r.jwt.service.DatabaseInitService - Initializing database with domains, roles and users from configuration
2025-03-20 21:30:00 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "406d2" for domain: sandcastle-auth
2025-03-20 21:30:00 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: sandcastle-auth
2025-03-20 21:30:00 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "a69fc" for domain: app1
2025-03-20 21:30:00 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: app1
2025-03-20 21:30:00 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "2e693" for domain: default
2025-03-20 21:30:00 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: default
2025-03-20 21:30:00 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: sandcastle-auth
2025-03-20 21:30:00 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: default
2025-03-20 21:30:00 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: app1
2025-03-20 21:30:00 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: USER in domain: app1
2025-03-20 21:30:00 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: MANAGER in domain: app1
2025-03-20 21:30:00 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using users pin from config "08fdd" for user authadmin in domain: sandcastle-auth
2025-03-20 21:30:00 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: authadmin in domain: sandcastle-auth
2025-03-20 21:30:00 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "a69fc" for user admin1 in domain: app1
2025-03-20 21:30:00 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: admin1 in domain: app1
2025-03-20 21:30:00 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "a69fc" for user user1 in domain: app1
2025-03-20 21:30:00 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user1 in domain: app1
2025-03-20 21:30:00 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "a69fc" for user user2 in domain: app1
2025-03-20 21:30:01 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user2 in domain: app1
2025-03-20 21:30:01 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "a69fc" for user user3 in domain: app1
2025-03-20 21:30:01 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user3 in domain: app1
2025-03-20 21:30:01 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "a69fc" for user manager1 in domain: app1
2025-03-20 21:30:01 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: manager1 in domain: app1
2025-03-20 21:30:01 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-20 21:30:01 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@60b8c05c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@62d72091, org.springframework.security.web.context.SecurityContextHolderFilter@65130cf2, org.springframework.security.web.header.HeaderWriterFilter@276b68af, org.springframework.security.web.authentication.logout.LogoutFilter@6abbdcde, tech.robd.jwt.filter.JwtAuthenticationFilter@388be5fd, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@18a349cb, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@542b27af, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7e092ca, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@76a86677, org.springframework.security.web.access.ExceptionTranslationFilter@62109320, org.springframework.security.web.access.intercept.AuthorizationFilter@52238861]
2025-03-20 21:30:02 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-18081"]
2025-03-20 21:30:02 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 18081 (http) with context path ''
2025-03-20 21:30:02 INFO  tech.robd.jwt.JwtAuthApplication - Started JwtAuthApplication in 8.756 seconds (process running for 10.214)
2025-03-20 21:30:05 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-20 21:30:05 INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-20 21:30:05 INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-03-20 21:30:05 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 21:30:05 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 21:30:05 DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/isUserValid
2025-03-20 21:30:10 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 21:30:10 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 21:30:10 DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/isUserValid
2025-03-20 21:30:11 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 21:30:11 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 21:30:11 DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/isUserValid
2025-03-20 21:30:12 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 21:30:12 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 21:30:12 DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/isUserValid
2025-03-20 21:30:13 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 21:30:13 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 21:30:13 DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/isUserValid
2025-03-20 21:30:14 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 21:30:14 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 21:30:14 DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/isUserValid
2025-03-20 21:30:15 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 21:30:15 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 21:30:15 DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/isUserValid
2025-03-20 21:30:33 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 21:30:33 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 21:30:33 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 21:30:40 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 10936 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 21:30:40 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 21:30:40 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 21:30:41 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 21:30:41 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 76 ms. Found 6 JPA repository interfaces.
2025-03-20 21:30:42 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 18081 (http)
2025-03-20 21:30:42 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-18081"]
2025-03-20 21:30:42 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 21:30:42 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 21:30:42 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 21:30:42 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1935 ms
2025-03-20 21:30:42 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 21:30:42 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 21:30:42 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 21:30:42 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 21:30:42 INFO  tech.robd.jwt.util.JwtTokenUtil - JWT secret key loaded from file successfully
2025-03-20 21:30:42 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 21:30:42 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 21:30:43 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 21:30:43 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 21:30:43 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 21:30:43 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 21:30:43 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 21:30:44 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 21:30:44 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 21:30:44 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 21:30:44 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 21:30:44 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 21:30:44 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 21:30:44 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 21:30:45 INFO  t.r.jwt.service.DatabaseInitService - Initializing database with domains, roles and users from configuration
2025-03-20 21:30:45 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "3a764" for domain: sandcastle-auth
2025-03-20 21:30:45 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: sandcastle-auth
2025-03-20 21:30:45 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "84f2a" for domain: app1
2025-03-20 21:30:45 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: app1
2025-03-20 21:30:45 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "607ab" for domain: default
2025-03-20 21:30:45 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: default
2025-03-20 21:30:45 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: sandcastle-auth
2025-03-20 21:30:45 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: default
2025-03-20 21:30:45 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: app1
2025-03-20 21:30:45 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: USER in domain: app1
2025-03-20 21:30:45 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: MANAGER in domain: app1
2025-03-20 21:30:45 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using users pin from config "08fdd" for user authadmin in domain: sandcastle-auth
2025-03-20 21:30:45 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: authadmin in domain: sandcastle-auth
2025-03-20 21:30:45 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "84f2a" for user admin1 in domain: app1
2025-03-20 21:30:45 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: admin1 in domain: app1
2025-03-20 21:30:45 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "84f2a" for user user1 in domain: app1
2025-03-20 21:30:45 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user1 in domain: app1
2025-03-20 21:30:45 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "84f2a" for user user2 in domain: app1
2025-03-20 21:30:45 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user2 in domain: app1
2025-03-20 21:30:45 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "84f2a" for user user3 in domain: app1
2025-03-20 21:30:46 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user3 in domain: app1
2025-03-20 21:30:46 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "84f2a" for user manager1 in domain: app1
2025-03-20 21:30:46 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: manager1 in domain: app1
2025-03-20 21:30:46 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-20 21:30:46 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@63767d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6aa85fcf, org.springframework.security.web.context.SecurityContextHolderFilter@253379ec, org.springframework.security.web.header.HeaderWriterFilter@f4b2d13, org.springframework.security.web.authentication.logout.LogoutFilter@36618b3b, tech.robd.jwt.filter.JwtAuthenticationFilter@69ec93c2, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@4fe4b8b6, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@27d4513e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@367653cc, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4c90fc3b, org.springframework.security.web.access.ExceptionTranslationFilter@10545d02, org.springframework.security.web.access.intercept.AuthorizationFilter@1b9cfc19]
2025-03-20 21:30:47 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-18081"]
2025-03-20 21:30:47 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 18081 (http) with context path ''
2025-03-20 21:30:47 INFO  tech.robd.jwt.JwtAuthApplication - Started JwtAuthApplication in 8.071 seconds (process running for 9.414)
2025-03-20 21:30:49 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-20 21:30:49 INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-20 21:30:49 INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-03-20 21:30:49 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 21:30:49 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 21:30:49 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-03-20 21:30:49 DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-03-20 21:30:49 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-03-20 21:30:49 DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost:18081/error?continue to session
2025-03-20 21:30:49 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2025-03-20 21:30:49 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@4c3bbbd4
2025-03-20 21:30:51 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 21:30:51 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 21:30:51 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-03-20 21:30:51 DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-03-20 21:30:51 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-03-20 21:30:51 DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost:18081/error?continue to session
2025-03-20 21:30:51 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2025-03-20 21:30:51 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@4c3bbbd4
2025-03-20 21:30:55 DEBUG o.s.security.web.FilterChainProxy - Securing POST /authenticate
2025-03-20 21:30:55 DEBUG t.r.j.filter.JwtAuthenticationFilter - No JWT token found in request
2025-03-20 21:30:55 DEBUG o.s.security.web.FilterChainProxy - Secured POST /authenticate
2025-03-20 21:30:55 INFO  t.robd.jwt.controller.AuthController - Authentication request received for username: authadmin
2025-03-20 21:30:55 DEBUG tech.robd.jwt.service.UserService - Validating credentials for user: authadmin
2025-03-20 21:30:55 INFO  tech.robd.jwt.service.UserService - Credentials validated successfully for user: authadmin
2025-03-20 21:30:55 INFO  t.robd.jwt.controller.AuthController - Authentication successful for user 'authadmin'
2025-03-20 21:30:55 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-03-20 21:31:14 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 21:31:14 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 21:31:14 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-03-20 21:31:14 DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-03-20 21:31:14 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-03-20 21:31:14 DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost:18081/error?continue to session
2025-03-20 21:31:14 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2025-03-20 21:31:14 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@4c3bbbd4
2025-03-20 21:36:32 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 21:36:32 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 21:36:32 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 21:36:43 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 1568 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 21:36:43 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 21:36:43 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 21:36:44 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 21:36:44 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 85 ms. Found 6 JPA repository interfaces.
2025-03-20 21:36:45 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 18081 (http)
2025-03-20 21:36:45 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-18081"]
2025-03-20 21:36:45 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 21:36:45 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 21:36:45 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 21:36:45 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2075 ms
2025-03-20 21:36:45 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 21:36:45 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 21:36:45 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 21:36:45 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 21:36:45 INFO  tech.robd.jwt.util.JwtTokenUtil - JWT secret key loaded from file successfully
2025-03-20 21:36:45 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 21:36:46 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 21:36:46 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 21:36:46 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 21:36:46 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 21:36:46 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 21:36:46 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 21:36:47 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 21:36:47 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 21:36:47 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 21:36:47 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 21:36:47 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 21:36:47 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 21:36:47 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 21:36:48 INFO  t.r.jwt.service.DatabaseInitService - Initializing database with domains, roles and users from configuration
2025-03-20 21:36:48 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "5c942" for domain: sandcastle-auth
2025-03-20 21:36:48 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: sandcastle-auth
2025-03-20 21:36:48 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "391a1" for domain: app1
2025-03-20 21:36:48 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: app1
2025-03-20 21:36:48 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Created random default pin "ce0ba" for domain: default
2025-03-20 21:36:48 INFO  t.r.jwt.service.DatabaseInitService - Created domain from configuration: default
2025-03-20 21:36:48 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: sandcastle-auth
2025-03-20 21:36:48 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: default
2025-03-20 21:36:48 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: ADMIN in domain: app1
2025-03-20 21:36:48 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: USER in domain: app1
2025-03-20 21:36:48 INFO  t.r.jwt.service.DatabaseInitService - Created role from configuration: MANAGER in domain: app1
2025-03-20 21:36:48 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using users pin from config "08fdd" for user authadmin in domain: sandcastle-auth
2025-03-20 21:36:48 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: authadmin in domain: sandcastle-auth
2025-03-20 21:36:48 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "391a1" for user admin1 in domain: app1
2025-03-20 21:36:49 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: admin1 in domain: app1
2025-03-20 21:36:49 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "391a1" for user user1 in domain: app1
2025-03-20 21:36:49 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user1 in domain: app1
2025-03-20 21:36:49 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "391a1" for user user2 in domain: app1
2025-03-20 21:36:49 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user2 in domain: app1
2025-03-20 21:36:49 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "391a1" for user user3 in domain: app1
2025-03-20 21:36:49 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: user3 in domain: app1
2025-03-20 21:36:49 INFO  t.r.jwt.service.DatabaseInitService - IMPORTANT INFORMATION: Using DOMAIN DEFAULT pin "391a1" for user manager1 in domain: app1
2025-03-20 21:36:49 INFO  t.r.jwt.service.DatabaseInitService - Created user from configuration: manager1 in domain: app1
2025-03-20 21:36:49 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-20 21:36:50 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@624268ab, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@33315925, org.springframework.security.web.context.SecurityContextHolderFilter@16a78700, org.springframework.security.web.header.HeaderWriterFilter@6c427386, org.springframework.security.web.authentication.logout.LogoutFilter@5b9ca528, tech.robd.jwt.filter.JwtAuthenticationFilter@40df6090, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@1798c749, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3ad80206, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2b4675db, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@366c9912, org.springframework.security.web.access.ExceptionTranslationFilter@25502b1c, org.springframework.security.web.access.intercept.AuthorizationFilter@f5314bc]
2025-03-20 21:36:50 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-18081"]
2025-03-20 21:36:51 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 18081 (http) with context path ''
2025-03-20 21:36:51 INFO  tech.robd.jwt.JwtAuthApplication - Started JwtAuthApplication in 9.596 seconds (process running for 12.942)
2025-03-20 21:36:55 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-20 21:36:55 INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-20 21:36:55 INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-03-20 21:36:55 DEBUG o.s.security.web.FilterChainProxy - Securing POST /authenticate
2025-03-20 21:36:55 DEBUG t.r.j.filter.JwtAuthenticationFilter - No JWT token found in request
2025-03-20 21:36:55 DEBUG o.s.security.web.FilterChainProxy - Secured POST /authenticate
2025-03-20 21:36:55 INFO  t.robd.jwt.controller.AuthController - Authentication request received for username: authadmin
2025-03-20 21:36:55 DEBUG tech.robd.jwt.service.UserService - Validating credentials for user: authadmin
2025-03-20 21:36:56 INFO  tech.robd.jwt.service.UserService - Credentials validated successfully for user: authadmin
2025-03-20 21:36:56 INFO  t.robd.jwt.controller.AuthController - Authentication successful for user 'authadmin'
2025-03-20 21:36:56 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-03-20 21:37:01 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 21:37:01 DEBUG tech.robd.jwt.util.JwtTokenUtil - JWT roles claim: [ADMIN]
2025-03-20 21:37:01 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 21:37:01 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-03-20 21:37:01 DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-03-20 21:37:01 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-03-20 21:37:01 DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost:18081/error?continue to session
2025-03-20 21:37:01 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2025-03-20 21:37:01 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@3896173d
2025-03-20 21:37:30 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 21:37:30 DEBUG tech.robd.jwt.util.JwtTokenUtil - JWT roles claim: [ADMIN]
2025-03-20 21:37:30 DEBUG t.r.j.filter.JwtAuthenticationFilter - Valid JWT token found for user: authadmin
2025-03-20 21:37:30 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-03-20 21:37:30 DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-03-20 21:37:30 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-03-20 21:37:30 DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost:18081/error?continue to session
2025-03-20 21:37:30 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2025-03-20 21:37:30 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@3896173d
2025-03-20 22:23:58 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 22:23:58 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 22:23:58 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 22:24:11 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 20432 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 22:24:11 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 22:24:11 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 22:24:12 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 22:24:12 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 113 ms. Found 6 JPA repository interfaces.
2025-03-20 22:24:13 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 18081 (http)
2025-03-20 22:24:13 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-18081"]
2025-03-20 22:24:13 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 22:24:13 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 22:24:13 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 22:24:13 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2377 ms
2025-03-20 22:24:13 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 22:24:14 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 22:24:14 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 22:24:14 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 22:24:14 INFO  tech.robd.jwt.util.JwtTokenUtil -  JWT secret key loaded successfully from config\jwt-key.txt
2025-03-20 22:24:14 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 22:24:14 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 22:24:14 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 22:24:14 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 22:24:14 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 22:24:14 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 22:24:15 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 22:24:15 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 22:24:16 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 22:24:16 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 22:24:16 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 22:24:16 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 22:24:16 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 22:24:16 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 22:24:16 INFO  t.r.jwt.service.DatabaseInitService -  Initializing database with domains, roles, and users from configuration
2025-03-20 22:24:16 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: Generated random PIN for domain: sandcastle-auth
2025-03-20 22:24:16 INFO  t.r.jwt.service.DatabaseInitService -  Created new domain: sandcastle-auth
2025-03-20 22:24:16 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: Generated random PIN for domain: app1
2025-03-20 22:24:16 INFO  t.r.jwt.service.DatabaseInitService -  Created new domain: app1
2025-03-20 22:24:16 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: Generated random PIN for domain: default
2025-03-20 22:24:16 INFO  t.r.jwt.service.DatabaseInitService -  Created new domain: default
2025-03-20 22:24:16 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: ADMIN in domain sandcastle-auth
2025-03-20 22:24:16 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: ADMIN in domain default
2025-03-20 22:24:16 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: ADMIN in domain app1
2025-03-20 22:24:16 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: USER in domain app1
2025-03-20 22:24:16 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: MANAGER in domain app1
2025-03-20 22:24:17 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: authadmin in domain sandcastle-auth
2025-03-20 22:24:17 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: admin1 in domain app1
2025-03-20 22:24:17 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: user1 in domain app1
2025-03-20 22:24:17 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: user2 in domain app1
2025-03-20 22:24:17 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: user3 in domain app1
2025-03-20 22:24:17 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: manager1 in domain app1
2025-03-20 22:24:17 INFO  t.r.jwt.service.DatabaseInitService -  Database initialization complete.
2025-03-20 22:24:17 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-20 22:24:18 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@234dfc8e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@18918ab9, org.springframework.security.web.context.SecurityContextHolderFilter@6238b10a, org.springframework.security.web.header.HeaderWriterFilter@7927209f, org.springframework.security.web.authentication.logout.LogoutFilter@31d09031, tech.robd.jwt.filter.JwtAuthenticationFilter@111a7973, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@510d4d4b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@26c494d7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@71d0ad00, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1315f1d5, org.springframework.security.web.access.ExceptionTranslationFilter@66075347, org.springframework.security.web.access.intercept.AuthorizationFilter@49231d79]
2025-03-20 22:24:19 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-18081"]
2025-03-20 22:24:19 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 18081 (http) with context path ''
2025-03-20 22:24:19 INFO  tech.robd.jwt.JwtAuthApplication - Started JwtAuthApplication in 10.704 seconds (process running for 13.425)
2025-03-20 22:24:45 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-20 22:24:45 INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-20 22:24:45 INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-03-20 22:24:45 DEBUG o.s.security.web.FilterChainProxy - Securing POST /authenticate
2025-03-20 22:24:45 DEBUG t.r.j.filter.JwtAuthenticationFilter - No Bearer token found in Authorization header.
2025-03-20 22:24:45 DEBUG t.r.j.filter.JwtAuthenticationFilter - No JWT token found in request for URI: /authenticate
2025-03-20 22:24:45 DEBUG o.s.security.web.FilterChainProxy - Secured POST /authenticate
2025-03-20 22:24:45 INFO  t.robd.jwt.controller.AuthController -  Authentication request received for username: authadmin
2025-03-20 22:24:45 DEBUG t.robd.jwt.controller.AuthController -  Authenticating user 'authadmin' in domain 'sandcastle-auth'
2025-03-20 22:24:45 DEBUG tech.robd.jwt.service.UserService - Validating credentials for user: authadmin, domain: sandcastle-auth
2025-03-20 22:24:45 INFO  tech.robd.jwt.service.UserService - Credentials validated successfully for user: authadmin, domain: sandcastle-auth
2025-03-20 22:24:45 DEBUG tech.robd.jwt.service.UserService - Finding user by username: authadmin, domain: sandcastle-auth
2025-03-20 22:24:45 DEBUG t.robd.jwt.controller.AuthController -  User 'authadmin' roles: [ADMIN]
2025-03-20 22:24:45 INFO  tech.robd.jwt.util.JwtTokenUtil -  Generating JWT token for user: authadmin, domain: sandcastle-auth
2025-03-20 22:24:45 DEBUG tech.robd.jwt.util.JwtTokenUtil -  Token generated successfully for user: authadmin
2025-03-20 22:24:45 INFO  t.robd.jwt.controller.AuthController -  Authentication successful for user 'authadmin'. Token issued.
2025-03-20 22:24:45 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-03-20 22:25:05 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 22:25:05 DEBUG t.r.j.filter.JwtAuthenticationFilter - Extracted Bearer token from Authorization header.
2025-03-20 22:25:05 DEBUG t.r.j.filter.JwtAuthenticationFilter - JWT token found in request for URI: /api/isUserValid
2025-03-20 22:25:05 DEBUG tech.robd.jwt.util.JwtTokenUtil -  Validating JWT token...
2025-03-20 22:25:05 DEBUG tech.robd.jwt.util.JwtTokenUtil -  Successfully extracted claims from JWT token.
2025-03-20 22:25:05 DEBUG tech.robd.jwt.util.JwtTokenUtil -  Token expiration check: Expiration=Fri Mar 21 22:24:45 GMT 2025, Expired=false
2025-03-20 22:25:05 DEBUG tech.robd.jwt.util.JwtTokenUtil -  JWT token is valid.
2025-03-20 22:25:05 DEBUG tech.robd.jwt.util.JwtTokenUtil -  Extracting username from JWT token...
2025-03-20 22:25:05 DEBUG tech.robd.jwt.util.JwtTokenUtil -  Successfully extracted claims from JWT token.
2025-03-20 22:25:05 DEBUG tech.robd.jwt.util.JwtTokenUtil -  Successfully extracted claims from JWT token.
2025-03-20 22:25:05 DEBUG tech.robd.jwt.util.JwtTokenUtil -  Extracted roles claim from token: [ADMIN]
2025-03-20 22:25:05 INFO  t.r.j.filter.JwtAuthenticationFilter - Authenticated user: authadmin, Roles: [ADMIN], Request URI: /api/isUserValid
2025-03-20 22:25:05 DEBUG t.r.j.filter.JwtAuthenticationFilter - User authadmin has authorities: [ROLE_ADMIN]
2025-03-20 22:25:05 DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-03-20 22:25:05 DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-03-20 22:25:05 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-03-20 22:25:05 DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost:18081/error?continue to session
2025-03-20 22:25:05 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2025-03-20 22:25:05 DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@6e3d306
2025-03-20 22:34:55 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 22:34:55 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 22:34:55 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 22:35:03 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 36804 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 22:35:03 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 22:35:03 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 22:35:05 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 22:35:05 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 92 ms. Found 6 JPA repository interfaces.
2025-03-20 22:35:06 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 18081 (http)
2025-03-20 22:35:06 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-18081"]
2025-03-20 22:35:06 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 22:35:06 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 22:35:06 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 22:35:06 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2152 ms
2025-03-20 22:35:06 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 22:35:06 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 22:35:06 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 22:35:06 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 22:35:06 INFO  tech.robd.jwt.util.JwtTokenUtil -  JWT secret key loaded successfully from config\jwt-key.txt
2025-03-20 22:35:06 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 22:35:07 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 22:35:07 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 22:35:07 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 22:35:07 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 22:35:07 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 22:35:08 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 22:35:09 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 22:35:09 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 22:35:09 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 22:35:09 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 22:35:09 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 22:35:09 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 22:35:09 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 22:35:11 INFO  t.r.jwt.service.DatabaseInitService -  Initializing database with domains, roles, and users from configuration
2025-03-20 22:35:11 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: Generated random PIN for domain: sandcastle-auth
2025-03-20 22:35:11 INFO  t.r.jwt.service.DatabaseInitService -  Created new domain: sandcastle-auth
2025-03-20 22:35:11 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: Generated random PIN for domain: app1
2025-03-20 22:35:11 INFO  t.r.jwt.service.DatabaseInitService -  Created new domain: app1
2025-03-20 22:35:11 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: Generated random PIN for domain: default
2025-03-20 22:35:11 INFO  t.r.jwt.service.DatabaseInitService -  Created new domain: default
2025-03-20 22:35:11 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: ADMIN in domain sandcastle-auth
2025-03-20 22:35:11 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: ADMIN in domain default
2025-03-20 22:35:11 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: ADMIN in domain app1
2025-03-20 22:35:11 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: USER in domain app1
2025-03-20 22:35:11 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: MANAGER in domain app1
2025-03-20 22:35:12 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: authadmin in domain sandcastle-auth
2025-03-20 22:35:12 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: admin1 in domain app1
2025-03-20 22:35:12 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: user1 in domain app1
2025-03-20 22:35:12 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: user2 in domain app1
2025-03-20 22:35:12 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: user3 in domain app1
2025-03-20 22:35:13 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: manager1 in domain app1
2025-03-20 22:35:13 INFO  t.r.jwt.service.DatabaseInitService -  Database initialization complete.
2025-03-20 22:35:13 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-20 22:35:13 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@510d4d4b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@12f32f99, org.springframework.security.web.context.SecurityContextHolderFilter@7927209f, org.springframework.security.web.header.HeaderWriterFilter@c4bb119, org.springframework.security.web.authentication.logout.LogoutFilter@eccaf1b, tech.robd.jwt.filter.JwtAuthenticationFilter@4ae8fb2a, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@60147536, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@747476f1, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6238b10a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@73ab649f, org.springframework.security.web.access.ExceptionTranslationFilter@6287e312, org.springframework.security.web.access.intercept.AuthorizationFilter@7a02d760]
2025-03-20 22:35:14 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-18081"]
2025-03-20 22:35:14 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 18081 (http) with context path ''
2025-03-20 22:35:14 INFO  tech.robd.jwt.JwtAuthApplication - Started JwtAuthApplication in 11.495 seconds (process running for 13.023)
2025-03-20 22:35:38 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-03-20 22:35:38 INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-03-20 22:35:38 INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-03-20 22:35:38 DEBUG o.s.security.web.FilterChainProxy - Securing POST /authenticate
2025-03-20 22:35:38 DEBUG t.r.j.filter.JwtAuthenticationFilter - No Bearer token found in Authorization header.
2025-03-20 22:35:38 DEBUG t.r.j.filter.JwtAuthenticationFilter - No JWT token found in request for URI: /authenticate
2025-03-20 22:35:38 DEBUG o.s.security.web.FilterChainProxy - Secured POST /authenticate
2025-03-20 22:35:38 INFO  t.robd.jwt.controller.AuthController -  Authentication request received for username: authadmin
2025-03-20 22:35:38 DEBUG t.robd.jwt.controller.AuthController -  Authenticating user 'authadmin' in domain 'sandcastle-auth'
2025-03-20 22:35:38 DEBUG tech.robd.jwt.service.UserService - Validating credentials for user: authadmin, domain: sandcastle-auth
2025-03-20 22:35:38 INFO  tech.robd.jwt.service.UserService - Credentials validated successfully for user: authadmin, domain: sandcastle-auth
2025-03-20 22:35:38 DEBUG tech.robd.jwt.service.UserService - Finding user by username: authadmin, domain: sandcastle-auth
2025-03-20 22:35:38 DEBUG t.robd.jwt.controller.AuthController -  User 'authadmin' roles: [ADMIN]
2025-03-20 22:35:38 INFO  tech.robd.jwt.util.JwtTokenUtil -  Generating JWT token for user: authadmin, domain: sandcastle-auth
2025-03-20 22:35:38 DEBUG tech.robd.jwt.util.JwtTokenUtil -  Token generated successfully for user: authadmin
2025-03-20 22:35:38 INFO  t.robd.jwt.controller.AuthController -  Authentication successful for user 'authadmin'. Token issued.
2025-03-20 22:35:39 DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-03-20 22:35:56 DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/isUserValid
2025-03-20 22:35:56 DEBUG t.r.j.filter.JwtAuthenticationFilter - Extracted Bearer token from Authorization header.
2025-03-20 22:35:56 DEBUG t.r.j.filter.JwtAuthenticationFilter - JWT token found in request for URI: /api/isUserValid
2025-03-20 22:35:56 DEBUG tech.robd.jwt.util.JwtTokenUtil -  Validating JWT token...
2025-03-20 22:35:56 DEBUG tech.robd.jwt.util.JwtTokenUtil -  Successfully extracted claims from JWT token.
2025-03-20 22:35:56 DEBUG tech.robd.jwt.util.JwtTokenUtil -  Token expiration check: Expiration=Fri Mar 21 22:35:38 GMT 2025, Expired=false
2025-03-20 22:35:56 DEBUG tech.robd.jwt.util.JwtTokenUtil -  JWT token is valid.
2025-03-20 22:35:56 DEBUG tech.robd.jwt.util.JwtTokenUtil -  Extracting username from JWT token...
2025-03-20 22:35:56 DEBUG tech.robd.jwt.util.JwtTokenUtil -  Successfully extracted claims from JWT token.
2025-03-20 22:35:56 DEBUG tech.robd.jwt.util.JwtTokenUtil -  Successfully extracted claims from JWT token.
2025-03-20 22:35:56 DEBUG tech.robd.jwt.util.JwtTokenUtil -  Extracted roles claim from token: [ADMIN]
2025-03-20 22:35:56 INFO  t.r.j.filter.JwtAuthenticationFilter - Authenticated user: authadmin, Roles: [ADMIN], Request URI: /api/isUserValid
2025-03-20 22:35:56 DEBUG t.r.j.filter.JwtAuthenticationFilter - User authadmin has authorities: [ROLE_ADMIN]
2025-03-20 22:35:57 DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/isUserValid
2025-03-20 22:35:57 DEBUG tech.robd.jwt.util.JwtTokenUtil -  Extracted username from token: authadmin
2025-03-20 22:35:57 DEBUG tech.robd.jwt.util.JwtTokenUtil -  Successfully extracted claims from JWT token.
2025-03-20 22:35:57 DEBUG tech.robd.jwt.util.JwtTokenUtil -  Extracted domain from token: sandcastle-auth
2025-03-20 22:35:57 DEBUG tech.robd.jwt.util.JwtTokenUtil -  Successfully extracted claims from JWT token.
2025-03-20 22:35:57 DEBUG tech.robd.jwt.util.JwtTokenUtil -  Extracted roles claim from token: [ADMIN]
2025-03-20 22:53:08 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 22:53:08 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 22:53:08 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 22:53:18 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 38344 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 22:53:18 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 22:53:18 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 22:53:19 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 22:53:19 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 83 ms. Found 6 JPA repository interfaces.
2025-03-20 22:53:20 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 18081 (http)
2025-03-20 22:53:20 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-18081"]
2025-03-20 22:53:20 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 22:53:20 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 22:53:20 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 22:53:20 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1829 ms
2025-03-20 22:53:20 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 22:53:20 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 22:53:20 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 22:53:20 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 22:53:20 INFO  tech.robd.jwt.util.JwtTokenUtil -  JWT secret key loaded successfully from config\jwt-key.txt
2025-03-20 22:53:21 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 22:53:21 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 22:53:21 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 22:53:21 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 22:53:21 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 22:53:21 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 22:53:22 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 22:53:23 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 22:53:23 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 22:53:23 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 22:53:23 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 22:53:23 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 22:53:23 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 22:53:23 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 22:53:23 INFO  t.r.jwt.service.DatabaseInitService -  Initializing database with domains, roles, and users from configuration
2025-03-20 22:53:23 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: Generated random PIN for domain: sandcastle-auth
2025-03-20 22:53:23 INFO  t.r.jwt.service.DatabaseInitService -  Created new domain: sandcastle-auth
2025-03-20 22:53:23 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: Generated random PIN for domain: app1
2025-03-20 22:53:23 INFO  t.r.jwt.service.DatabaseInitService -  Created new domain: app1
2025-03-20 22:53:23 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: Generated random PIN for domain: default
2025-03-20 22:53:23 INFO  t.r.jwt.service.DatabaseInitService -  Created new domain: default
2025-03-20 22:53:24 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: ADMIN in domain sandcastle-auth
2025-03-20 22:53:24 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: ADMIN in domain default
2025-03-20 22:53:24 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: ADMIN in domain app1
2025-03-20 22:53:24 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: USER in domain app1
2025-03-20 22:53:24 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: MANAGER in domain app1
2025-03-20 22:53:24 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: authadmin in domain sandcastle-auth
2025-03-20 22:53:24 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: admin1 in domain app1
2025-03-20 22:53:24 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: user1 in domain app1
2025-03-20 22:53:24 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: user2 in domain app1
2025-03-20 22:53:24 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: user3 in domain app1
2025-03-20 22:53:24 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: manager1 in domain app1
2025-03-20 22:53:24 INFO  t.r.jwt.service.DatabaseInitService -  Database initialization complete.
2025-03-20 22:53:24 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-20 22:53:25 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@62c02089, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3359217d, org.springframework.security.web.context.SecurityContextHolderFilter@59eb987a, org.springframework.security.web.header.HeaderWriterFilter@5b166420, org.springframework.security.web.authentication.logout.LogoutFilter@2a8081f5, tech.robd.jwt.filter.JwtAuthenticationFilter@17fbfb02, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@49231d79, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@74214ac3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@e00c94e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@25ee3cd6, org.springframework.security.web.access.ExceptionTranslationFilter@78b293a, org.springframework.security.web.access.intercept.AuthorizationFilter@17fa25f1]
2025-03-20 22:53:26 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-18081"]
2025-03-20 22:53:26 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 18081 (http) with context path ''
2025-03-20 22:53:26 INFO  tech.robd.jwt.JwtAuthApplication - Started JwtAuthApplication in 9.065 seconds (process running for 11.967)
2025-03-20 23:11:16 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 23:11:16 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 23:11:16 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 23:11:23 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 34588 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 23:11:23 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 23:11:23 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 23:11:24 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 23:11:24 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 78 ms. Found 6 JPA repository interfaces.
2025-03-20 23:11:25 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 18081 (http)
2025-03-20 23:11:25 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-18081"]
2025-03-20 23:11:25 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 23:11:25 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 23:11:25 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 23:11:25 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1993 ms
2025-03-20 23:11:25 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 23:11:25 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 23:11:25 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 23:11:25 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 23:11:25 INFO  tech.robd.jwt.util.JwtTokenUtil -  JWT secret key loaded successfully from config\jwt-key.txt
2025-03-20 23:11:25 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 23:11:25 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 23:11:25 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 23:11:25 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 23:11:26 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 23:11:26 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 23:11:26 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 23:11:27 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 23:11:27 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 23:11:27 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 23:11:27 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 23:11:27 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 23:11:27 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 23:11:27 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 23:11:28 INFO  t.r.jwt.service.DatabaseInitService -  Initializing database with domains, roles, and users from configuration
2025-03-20 23:11:28 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: Generated random PIN for domain: sandcastle-auth
2025-03-20 23:11:28 INFO  t.r.jwt.service.DatabaseInitService -  Created new domain: sandcastle-auth
2025-03-20 23:11:28 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: Generated random PIN for domain: app1
2025-03-20 23:11:28 INFO  t.r.jwt.service.DatabaseInitService -  Created new domain: app1
2025-03-20 23:11:28 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: Generated random PIN for domain: default
2025-03-20 23:11:28 INFO  t.r.jwt.service.DatabaseInitService -  Created new domain: default
2025-03-20 23:11:28 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: ADMIN in domain sandcastle-auth
2025-03-20 23:11:28 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: ADMIN in domain default
2025-03-20 23:11:28 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: ADMIN in domain app1
2025-03-20 23:11:28 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: USER in domain app1
2025-03-20 23:11:28 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: MANAGER in domain app1
2025-03-20 23:11:28 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: authadmin in domain sandcastle-auth
2025-03-20 23:11:29 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: admin1 in domain app1
2025-03-20 23:11:29 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: user1 in domain app1
2025-03-20 23:11:29 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: user2 in domain app1
2025-03-20 23:11:29 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: user3 in domain app1
2025-03-20 23:11:29 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: manager1 in domain app1
2025-03-20 23:11:29 INFO  t.r.jwt.service.DatabaseInitService -  Database initialization complete.
2025-03-20 23:11:29 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-20 23:11:30 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1ae37be2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@60147536, org.springframework.security.web.context.SecurityContextHolderFilter@6a450cb5, org.springframework.security.web.header.HeaderWriterFilter@b2db8bc, org.springframework.security.web.authentication.logout.LogoutFilter@17fa25f1, tech.robd.jwt.filter.JwtAuthenticationFilter@3b170235, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@100d5018, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@66075347, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3b45a3e6, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2438a038, org.springframework.security.web.access.ExceptionTranslationFilter@74214ac3, org.springframework.security.web.access.intercept.AuthorizationFilter@31d09031]
2025-03-20 23:11:31 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-18081"]
2025-03-20 23:11:31 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 18081 (http) with context path ''
2025-03-20 23:11:31 INFO  tech.robd.jwt.JwtAuthApplication - Started JwtAuthApplication in 9.229 seconds (process running for 10.868)
2025-03-20 23:11:54 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 23:11:54 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 23:11:54 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 23:12:03 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 27596 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 23:12:03 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 23:12:03 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 23:12:04 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 23:12:05 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 93 ms. Found 6 JPA repository interfaces.
2025-03-20 23:12:05 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 18081 (http)
2025-03-20 23:12:05 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-18081"]
2025-03-20 23:12:05 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 23:12:05 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 23:12:05 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 23:12:05 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1940 ms
2025-03-20 23:12:05 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 23:12:06 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 23:12:06 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 23:12:06 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 23:12:06 INFO  tech.robd.jwt.util.JwtTokenUtil -  JWT secret key loaded successfully from config\jwt-key.txt
2025-03-20 23:12:06 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 23:12:06 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 23:12:06 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 23:12:06 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 23:12:06 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 23:12:06 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 23:12:07 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 23:12:08 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 23:12:08 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 23:12:08 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 23:12:08 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 23:12:08 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 23:12:08 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 23:12:08 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 23:12:08 INFO  t.r.jwt.service.DatabaseInitService -  Initializing database with domains, roles, and users from configuration
2025-03-20 23:12:09 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: Generated random PIN for domain: sandcastle-auth
2025-03-20 23:12:09 INFO  t.r.jwt.service.DatabaseInitService -  Created new domain: sandcastle-auth
2025-03-20 23:12:09 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: Generated random PIN for domain: app1
2025-03-20 23:12:09 INFO  t.r.jwt.service.DatabaseInitService -  Created new domain: app1
2025-03-20 23:12:09 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: Generated random PIN for domain: default
2025-03-20 23:12:09 INFO  t.r.jwt.service.DatabaseInitService -  Created new domain: default
2025-03-20 23:12:09 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: ADMIN in domain sandcastle-auth
2025-03-20 23:12:09 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: ADMIN in domain default
2025-03-20 23:12:09 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: ADMIN in domain app1
2025-03-20 23:12:09 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: USER in domain app1
2025-03-20 23:12:09 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: MANAGER in domain app1
2025-03-20 23:12:09 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: authadmin in domain sandcastle-auth
2025-03-20 23:12:09 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: admin1 in domain app1
2025-03-20 23:12:09 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: user1 in domain app1
2025-03-20 23:12:09 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: user2 in domain app1
2025-03-20 23:12:09 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: user3 in domain app1
2025-03-20 23:12:10 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: manager1 in domain app1
2025-03-20 23:12:10 INFO  t.r.jwt.service.DatabaseInitService -  Database initialization complete.
2025-03-20 23:12:10 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-20 23:12:10 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2438a038, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@50b010d4, org.springframework.security.web.context.SecurityContextHolderFilter@66075347, org.springframework.security.web.header.HeaderWriterFilter@6287e312, org.springframework.security.web.authentication.logout.LogoutFilter@1545ef47, tech.robd.jwt.filter.JwtAuthenticationFilter@8f2e3e6, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@3e7940b3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7927209f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@283595db, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@510d4d4b, org.springframework.security.web.access.ExceptionTranslationFilter@b2db8bc, org.springframework.security.web.access.intercept.AuthorizationFilter@106f0051]
2025-03-20 23:12:11 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-18081"]
2025-03-20 23:12:11 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 18081 (http) with context path ''
2025-03-20 23:12:11 INFO  tech.robd.jwt.JwtAuthApplication - Started JwtAuthApplication in 8.709 seconds (process running for 10.092)
2025-03-20 23:13:04 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 23:13:04 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 23:13:04 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 23:13:11 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 35996 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 23:13:11 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 23:13:11 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 23:13:12 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 23:13:12 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 114 ms. Found 6 JPA repository interfaces.
2025-03-20 23:13:13 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 18081 (http)
2025-03-20 23:13:13 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-18081"]
2025-03-20 23:13:13 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 23:13:13 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 23:13:13 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 23:13:13 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2316 ms
2025-03-20 23:13:13 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 23:13:14 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 23:13:14 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 23:13:14 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 23:13:14 INFO  tech.robd.jwt.util.JwtTokenUtil -  JWT secret key loaded successfully from config\jwt-key.txt
2025-03-20 23:13:14 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 23:13:14 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 23:13:14 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 23:13:14 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 23:13:14 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 23:13:14 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 23:13:15 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 23:13:16 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 23:13:16 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 23:13:16 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 23:13:16 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 23:13:16 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 23:13:16 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 23:13:16 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 23:13:16 INFO  t.r.jwt.service.DatabaseInitService -  Initializing database with domains, roles, and users from configuration
2025-03-20 23:13:16 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: Generated random PIN for domain: sandcastle-auth
2025-03-20 23:13:17 INFO  t.r.jwt.service.DatabaseInitService -  Created new domain: sandcastle-auth
2025-03-20 23:13:17 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: Generated random PIN for domain: app1
2025-03-20 23:13:17 INFO  t.r.jwt.service.DatabaseInitService -  Created new domain: app1
2025-03-20 23:13:17 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: Generated random PIN for domain: default
2025-03-20 23:13:17 INFO  t.r.jwt.service.DatabaseInitService -  Created new domain: default
2025-03-20 23:13:17 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: ADMIN in domain sandcastle-auth
2025-03-20 23:13:17 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: ADMIN in domain default
2025-03-20 23:13:17 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: ADMIN in domain app1
2025-03-20 23:13:17 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: USER in domain app1
2025-03-20 23:13:17 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: MANAGER in domain app1
2025-03-20 23:13:17 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: authadmin in domain sandcastle-auth
2025-03-20 23:13:17 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: admin1 in domain app1
2025-03-20 23:13:17 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: user1 in domain app1
2025-03-20 23:13:17 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: user2 in domain app1
2025-03-20 23:13:17 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: user3 in domain app1
2025-03-20 23:13:17 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: manager1 in domain app1
2025-03-20 23:13:17 INFO  t.r.jwt.service.DatabaseInitService -  Database initialization complete.
2025-03-20 23:13:17 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-20 23:13:18 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3359217d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@25ee3cd6, org.springframework.security.web.context.SecurityContextHolderFilter@31b4c003, org.springframework.security.web.header.HeaderWriterFilter@49318c2a, org.springframework.security.web.authentication.logout.LogoutFilter@20a434a8, tech.robd.jwt.filter.JwtAuthenticationFilter@24e5389c, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@25f67aea, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@e00c94e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@b2db8bc, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@732ae29c, org.springframework.security.web.access.ExceptionTranslationFilter@146b4c6c, org.springframework.security.web.access.intercept.AuthorizationFilter@50ac63b2]
2025-03-20 23:13:19 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-18081"]
2025-03-20 23:13:19 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 18081 (http) with context path ''
2025-03-20 23:13:19 INFO  tech.robd.jwt.JwtAuthApplication - Started JwtAuthApplication in 9.003 seconds (process running for 10.347)
2025-03-20 23:13:40 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 23:13:40 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 23:13:40 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 23:13:45 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 12468 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 23:13:45 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 23:13:45 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 23:13:46 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 23:13:46 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 103 ms. Found 6 JPA repository interfaces.
2025-03-20 23:13:47 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 18081 (http)
2025-03-20 23:13:47 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-18081"]
2025-03-20 23:13:47 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 23:13:47 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 23:13:47 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 23:13:47 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2202 ms
2025-03-20 23:13:47 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 23:13:48 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 23:13:48 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 23:13:48 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 23:13:48 INFO  tech.robd.jwt.util.JwtTokenUtil -  JWT secret key loaded successfully from config\jwt-key.txt
2025-03-20 23:13:48 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 23:13:48 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 23:13:48 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 23:13:48 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 23:13:48 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 23:13:48 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 23:13:49 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 23:13:50 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 23:13:50 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 23:13:50 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 23:13:50 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 23:13:50 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 23:13:50 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 23:13:50 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST SECURITY LOG - Should appear in security log
2025-03-20 23:13:50 INFO  t.r.jwt.service.DatabaseInitService -  Initializing database with domains, roles, and users from configuration
2025-03-20 23:13:51 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: Generated random PIN for domain: sandcastle-auth
2025-03-20 23:13:51 INFO  t.r.jwt.service.DatabaseInitService -  Created new domain: sandcastle-auth
2025-03-20 23:13:51 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: Generated random PIN for domain: app1
2025-03-20 23:13:51 INFO  t.r.jwt.service.DatabaseInitService -  Created new domain: app1
2025-03-20 23:13:51 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: Generated random PIN for domain: default
2025-03-20 23:13:51 INFO  t.r.jwt.service.DatabaseInitService -  Created new domain: default
2025-03-20 23:13:51 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: ADMIN in domain sandcastle-auth
2025-03-20 23:13:51 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: ADMIN in domain default
2025-03-20 23:13:51 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: ADMIN in domain app1
2025-03-20 23:13:51 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: USER in domain app1
2025-03-20 23:13:51 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: MANAGER in domain app1
2025-03-20 23:13:51 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: authadmin in domain sandcastle-auth
2025-03-20 23:13:51 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: admin1 in domain app1
2025-03-20 23:13:51 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: user1 in domain app1
2025-03-20 23:13:51 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: user2 in domain app1
2025-03-20 23:13:51 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: user3 in domain app1
2025-03-20 23:13:51 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: manager1 in domain app1
2025-03-20 23:13:51 INFO  t.r.jwt.service.DatabaseInitService -  Database initialization complete.
2025-03-20 23:13:51 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-20 23:13:52 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2438a038, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@50b010d4, org.springframework.security.web.context.SecurityContextHolderFilter@66075347, org.springframework.security.web.header.HeaderWriterFilter@6287e312, org.springframework.security.web.authentication.logout.LogoutFilter@1545ef47, tech.robd.jwt.filter.JwtAuthenticationFilter@4b4814d0, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@3e7940b3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7927209f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@283595db, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@510d4d4b, org.springframework.security.web.access.ExceptionTranslationFilter@b2db8bc, org.springframework.security.web.access.intercept.AuthorizationFilter@106f0051]
2025-03-20 23:13:53 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-18081"]
2025-03-20 23:13:53 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 18081 (http) with context path ''
2025-03-20 23:13:53 INFO  tech.robd.jwt.JwtAuthApplication - Started JwtAuthApplication in 8.918 seconds (process running for 10.32)
2025-03-20 23:37:42 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 23:37:42 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 23:37:42 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 23:37:56 ERROR o.s.boot.SpringApplication - Application run failed
java.lang.IllegalStateException: java.lang.IllegalStateException: Logback configuration error detected: 
ERROR in ch.qos.logback.core.model.processor.ImplicitModelHandler - Could not create component [filter] of type [ch.qos.logback.classic.filter.EvaluatorFilter] java.lang.ClassNotFoundException: ch.qos.logback.classic.filter.EvaluatorFilter
ERROR in ch.qos.logback.core.model.processor.ImplicitModelHandler - Could not create component [filter] of type [ch.qos.logback.classic.filter.EvaluatorFilter] java.lang.ClassNotFoundException: ch.qos.logback.classic.filter.EvaluatorFilter
	at org.springframework.boot.context.logging.LoggingApplicationListener.initializeSystem(LoggingApplicationListener.java:347)
	at org.springframework.boot.context.logging.LoggingApplicationListener.initialize(LoggingApplicationListener.java:298)
	at org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEnvironmentPreparedEvent(LoggingApplicationListener.java:246)
	at org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEvent(LoggingApplicationListener.java:223)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:131)
	at org.springframework.boot.context.event.EventPublishingRunListener.multicastInitialEvent(EventPublishingRunListener.java:136)
	at org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:81)
	at org.springframework.boot.SpringApplicationRunListeners.lambda$environmentPrepared$2(SpringApplicationRunListeners.java:64)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:118)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:112)
	at org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:63)
	at org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:356)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:307)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)
	at tech.robd.jwt.JwtAuthApplication.main(JwtAuthApplication.java:48)
Caused by: java.lang.IllegalStateException: Logback configuration error detected: 
ERROR in ch.qos.logback.core.model.processor.ImplicitModelHandler - Could not create component [filter] of type [ch.qos.logback.classic.filter.EvaluatorFilter] java.lang.ClassNotFoundException: ch.qos.logback.classic.filter.EvaluatorFilter
ERROR in ch.qos.logback.core.model.processor.ImplicitModelHandler - Could not create component [filter] of type [ch.qos.logback.classic.filter.EvaluatorFilter] java.lang.ClassNotFoundException: ch.qos.logback.classic.filter.EvaluatorFilter
	at org.springframework.boot.logging.logback.LogbackLoggingSystem.reportConfigurationErrorsIfNecessary(LogbackLoggingSystem.java:260)
	at org.springframework.boot.logging.logback.LogbackLoggingSystem.loadConfiguration(LogbackLoggingSystem.java:247)
	at org.springframework.boot.logging.AbstractLoggingSystem.initializeWithSpecificConfig(AbstractLoggingSystem.java:66)
	at org.springframework.boot.logging.AbstractLoggingSystem.initialize(AbstractLoggingSystem.java:57)
	at org.springframework.boot.logging.logback.LogbackLoggingSystem.initialize(LogbackLoggingSystem.java:187)
	at org.springframework.boot.context.logging.LoggingApplicationListener.initializeSystem(LoggingApplicationListener.java:335)
	... 19 common frames omitted
2025-03-20 23:39:25 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 16268 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 23:39:25 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 23:39:25 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 23:39:26 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 23:39:26 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 95 ms. Found 6 JPA repository interfaces.
2025-03-20 23:39:27 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 18081 (http)
2025-03-20 23:39:27 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-18081"]
2025-03-20 23:39:27 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 23:39:27 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 23:39:27 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 23:39:27 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2186 ms
2025-03-20 23:39:27 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 23:39:27 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 23:39:27 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 23:39:27 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 23:39:27 INFO  tech.robd.jwt.util.JwtTokenUtil -  JWT secret key loaded successfully from config\jwt-key.txt
2025-03-20 23:39:27 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 23:39:28 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 23:39:28 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 23:39:28 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 23:39:28 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 23:39:28 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 23:39:28 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 23:39:29 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 23:39:29 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 23:39:29 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 23:39:29 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 23:39:29 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 23:39:29 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 23:39:29 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - BEGIN SECURITY LOG - Now logging important security events.
2025-03-20 23:39:30 INFO  t.r.jwt.service.DatabaseInitService -  Initializing database with domains, roles, and users from configuration
2025-03-20 23:39:30 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: Generated random PIN  ("ced06") for domain: sandcastle-auth
2025-03-20 23:39:30 INFO  t.r.jwt.service.DatabaseInitService -  Created new domain: sandcastle-auth
2025-03-20 23:39:30 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: Generated random PIN  ("ae8ec") for domain: app1
2025-03-20 23:39:30 INFO  t.r.jwt.service.DatabaseInitService -  Created new domain: app1
2025-03-20 23:39:30 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: Generated random PIN  ("def49") for domain: default
2025-03-20 23:39:30 INFO  t.r.jwt.service.DatabaseInitService -  Created new domain: default
2025-03-20 23:39:30 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: ADMIN in domain sandcastle-auth
2025-03-20 23:39:30 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: ADMIN in domain default
2025-03-20 23:39:30 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: ADMIN in domain app1
2025-03-20 23:39:30 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: USER in domain app1
2025-03-20 23:39:30 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: MANAGER in domain app1
2025-03-20 23:39:30 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: User PIN  ("08fdd") set from config for user: authadmin in domain: sandcastle-auth
2025-03-20 23:39:30 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: authadmin in domain sandcastle-auth
2025-03-20 23:39:30 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: User PIN ("ae8ec") set by default from domain config for user: admin1 in domain: app1
2025-03-20 23:39:31 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: admin1 in domain app1
2025-03-20 23:39:31 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: User PIN ("ae8ec") set by default from domain config for user: user1 in domain: app1
2025-03-20 23:39:31 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: user1 in domain app1
2025-03-20 23:39:31 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: User PIN ("ae8ec") set by default from domain config for user: user2 in domain: app1
2025-03-20 23:39:31 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: user2 in domain app1
2025-03-20 23:39:31 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: User PIN ("ae8ec") set by default from domain config for user: user3 in domain: app1
2025-03-20 23:39:31 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: user3 in domain app1
2025-03-20 23:39:31 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: User PIN ("ae8ec") set by default from domain config for user: manager1 in domain: app1
2025-03-20 23:39:31 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: manager1 in domain app1
2025-03-20 23:39:31 INFO  t.r.jwt.service.DatabaseInitService -  Database initialization complete.
2025-03-20 23:39:31 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-20 23:39:32 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@12f32f99, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@73ab649f, org.springframework.security.web.context.SecurityContextHolderFilter@283595db, org.springframework.security.web.header.HeaderWriterFilter@66075347, org.springframework.security.web.authentication.logout.LogoutFilter@3dceec83, tech.robd.jwt.filter.JwtAuthenticationFilter@20216016, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@2438a038, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6238b10a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@225b460a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@234dfc8e, org.springframework.security.web.access.ExceptionTranslationFilter@6a450cb5, org.springframework.security.web.access.intercept.AuthorizationFilter@5a86112a]
2025-03-20 23:39:33 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-18081"]
2025-03-20 23:39:33 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 18081 (http) with context path ''
2025-03-20 23:39:33 INFO  tech.robd.jwt.JwtAuthApplication - Started JwtAuthApplication in 9.287 seconds (process running for 10.394)
2025-03-20 23:41:20 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 23:41:20 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 23:41:20 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 23:41:39 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 30980 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 23:41:39 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 23:41:39 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 23:41:40 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 23:41:40 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 75 ms. Found 6 JPA repository interfaces.
2025-03-20 23:41:41 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 18081 (http)
2025-03-20 23:41:41 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-18081"]
2025-03-20 23:41:41 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 23:41:41 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 23:41:41 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 23:41:41 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2009 ms
2025-03-20 23:41:41 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 23:41:41 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 23:41:41 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 23:41:41 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 23:41:41 INFO  tech.robd.jwt.util.JwtTokenUtil -  JWT secret key loaded successfully from config\jwt-key.txt
2025-03-20 23:41:41 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 23:41:41 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 23:41:42 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 23:41:42 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 23:41:42 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 23:41:42 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 23:41:42 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 23:41:43 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 23:41:43 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 23:41:43 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST ERROR LOG - Should appear in console
2025-03-20 23:41:43 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST WARNING LOG - Should appear in console
2025-03-20 23:41:43 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST INFO LOG - Should appear in console
2025-03-20 23:41:43 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - TEST DEBUG LOG - May or may not appear depending on level
2025-03-20 23:41:43 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - BEGIN SECURITY LOG - Now logging important security events.
2025-03-20 23:41:44 INFO  t.r.jwt.service.DatabaseInitService -  Initializing database with domains, roles, and users from configuration
2025-03-20 23:41:44 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: Generated random PIN  ("59143") for domain: sandcastle-auth
2025-03-20 23:41:44 INFO  t.r.jwt.service.DatabaseInitService -  Created new domain: sandcastle-auth
2025-03-20 23:41:44 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: Generated random PIN  ("ce207") for domain: app1
2025-03-20 23:41:44 INFO  t.r.jwt.service.DatabaseInitService -  Created new domain: app1
2025-03-20 23:41:44 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: Generated random PIN  ("b4df1") for domain: default
2025-03-20 23:41:44 INFO  t.r.jwt.service.DatabaseInitService -  Created new domain: default
2025-03-20 23:41:44 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: ADMIN in domain sandcastle-auth
2025-03-20 23:41:44 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: ADMIN in domain default
2025-03-20 23:41:44 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: ADMIN in domain app1
2025-03-20 23:41:44 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: USER in domain app1
2025-03-20 23:41:44 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: MANAGER in domain app1
2025-03-20 23:41:44 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: User PIN  ("08fdd") set from config for user: authadmin in domain: sandcastle-auth
2025-03-20 23:41:44 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: authadmin in domain sandcastle-auth
2025-03-20 23:41:44 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: User PIN ("ce207") set by default from domain config for user: admin1 in domain: app1
2025-03-20 23:41:45 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: admin1 in domain app1
2025-03-20 23:41:45 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: User PIN ("ce207") set by default from domain config for user: user1 in domain: app1
2025-03-20 23:41:45 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: user1 in domain app1
2025-03-20 23:41:45 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: User PIN ("ce207") set by default from domain config for user: user2 in domain: app1
2025-03-20 23:41:45 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: user2 in domain app1
2025-03-20 23:41:45 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: User PIN ("ce207") set by default from domain config for user: user3 in domain: app1
2025-03-20 23:41:45 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: user3 in domain app1
2025-03-20 23:41:45 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: User PIN ("ce207") set by default from domain config for user: manager1 in domain: app1
2025-03-20 23:41:45 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: manager1 in domain app1
2025-03-20 23:41:45 INFO  t.r.jwt.service.DatabaseInitService -  Database initialization complete.
2025-03-20 23:41:45 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-20 23:41:45 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@73bb782d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3a3375d8, org.springframework.security.web.context.SecurityContextHolderFilter@58f8ce0f, org.springframework.security.web.header.HeaderWriterFilter@56c7e2d1, org.springframework.security.web.authentication.logout.LogoutFilter@49231d79, tech.robd.jwt.filter.JwtAuthenticationFilter@78b0ec3a, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@77d7d2d0, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3bb6b9ab, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@31f90517, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@63bb719d, org.springframework.security.web.access.ExceptionTranslationFilter@26c494d7, org.springframework.security.web.access.intercept.AuthorizationFilter@100d5018]
2025-03-20 23:41:46 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-18081"]
2025-03-20 23:41:46 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 18081 (http) with context path ''
2025-03-20 23:41:46 INFO  tech.robd.jwt.JwtAuthApplication - Started JwtAuthApplication in 8.889 seconds (process running for 10.327)
2025-03-20 23:42:05 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 23:42:05 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 23:42:05 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 23:46:07 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 10156 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 23:46:07 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 23:46:07 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 23:46:09 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 23:46:09 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 210 ms. Found 6 JPA repository interfaces.
2025-03-20 23:46:10 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 18081 (http)
2025-03-20 23:46:10 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-18081"]
2025-03-20 23:46:10 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 23:46:10 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 23:46:10 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 23:46:10 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3564 ms
2025-03-20 23:46:11 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 23:46:11 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 23:46:11 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 23:46:11 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 23:46:11 INFO  tech.robd.jwt.util.JwtTokenUtil -  JWT secret key loaded successfully from config\jwt-key.txt
2025-03-20 23:46:11 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 23:46:11 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 23:46:11 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 23:46:11 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 23:46:11 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 23:46:12 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 23:46:17 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 23:46:22 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 23:46:22 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 23:46:22 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - BEGIN ERROR LOG
2025-03-20 23:46:22 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - BEGIN WARNING LOG
2025-03-20 23:46:22 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - BEGIN INFO LOG
2025-03-20 23:46:22 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - BEGIN DEBUG LOG
2025-03-20 23:46:22 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - BEGIN SECURITY LOG - Now logging important security events.
2025-03-20 23:46:23 INFO  t.r.jwt.service.DatabaseInitService -  Initializing database with domains, roles, and users from configuration
2025-03-20 23:46:24 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: Generated random PIN  ("c5949") for domain: sandcastle-auth
2025-03-20 23:46:24 INFO  t.r.jwt.service.DatabaseInitService -  Created new domain: sandcastle-auth
2025-03-20 23:46:24 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: Generated random PIN  ("918ba") for domain: app1
2025-03-20 23:46:24 INFO  t.r.jwt.service.DatabaseInitService -  Created new domain: app1
2025-03-20 23:46:24 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: Generated random PIN  ("e71e6") for domain: default
2025-03-20 23:46:24 INFO  t.r.jwt.service.DatabaseInitService -  Created new domain: default
2025-03-20 23:46:24 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: ADMIN in domain sandcastle-auth
2025-03-20 23:46:24 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: ADMIN in domain default
2025-03-20 23:46:24 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: ADMIN in domain app1
2025-03-20 23:46:24 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: USER in domain app1
2025-03-20 23:46:24 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: MANAGER in domain app1
2025-03-20 23:46:24 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: User PIN  ("08fdd") set from config for user: authadmin in domain: sandcastle-auth
2025-03-20 23:46:24 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: authadmin in domain sandcastle-auth
2025-03-20 23:46:24 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: User PIN ("918ba") set by default from domain config for user: admin1 in domain: app1
2025-03-20 23:46:24 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: admin1 in domain app1
2025-03-20 23:46:24 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: User PIN ("918ba") set by default from domain config for user: user1 in domain: app1
2025-03-20 23:46:24 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: user1 in domain app1
2025-03-20 23:46:24 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: User PIN ("918ba") set by default from domain config for user: user2 in domain: app1
2025-03-20 23:46:25 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: user2 in domain app1
2025-03-20 23:46:25 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: User PIN ("918ba") set by default from domain config for user: user3 in domain: app1
2025-03-20 23:46:25 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: user3 in domain app1
2025-03-20 23:46:25 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: User PIN ("918ba") set by default from domain config for user: manager1 in domain: app1
2025-03-20 23:46:25 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: manager1 in domain app1
2025-03-20 23:46:25 INFO  t.r.jwt.service.DatabaseInitService -  Database initialization complete.
2025-03-20 23:46:25 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-20 23:46:26 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6c4eccd2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@564e9c0b, org.springframework.security.web.context.SecurityContextHolderFilter@492e9e87, org.springframework.security.web.header.HeaderWriterFilter@207358ad, org.springframework.security.web.authentication.logout.LogoutFilter@28f7cca4, tech.robd.jwt.filter.JwtAuthenticationFilter@13516600, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@475fb7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3a744e32, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@18487f92, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4c7d19bf, org.springframework.security.web.access.ExceptionTranslationFilter@7375ebe7, org.springframework.security.web.access.intercept.AuthorizationFilter@1eeb9e5c]
2025-03-20 23:46:27 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-18081"]
2025-03-20 23:46:27 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 18081 (http) with context path ''
2025-03-20 23:46:27 INFO  tech.robd.jwt.JwtAuthApplication - Started JwtAuthApplication in 21.349 seconds (process running for 26.909)
2025-03-20 23:48:41 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 23:48:41 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 23:48:41 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 23:48:47 ERROR o.s.boot.SpringApplication - Application run failed
java.lang.IllegalStateException: java.lang.IllegalStateException: Logback configuration error detected: 
ERROR in ch.qos.logback.core.model.processor.ImplicitModelHandler - Could not create component [filter] of type [ch.qos.logback.classic.filter.MarkerFilter] java.lang.ClassNotFoundException: ch.qos.logback.classic.filter.MarkerFilter
	at org.springframework.boot.context.logging.LoggingApplicationListener.initializeSystem(LoggingApplicationListener.java:347)
	at org.springframework.boot.context.logging.LoggingApplicationListener.initialize(LoggingApplicationListener.java:298)
	at org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEnvironmentPreparedEvent(LoggingApplicationListener.java:246)
	at org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEvent(LoggingApplicationListener.java:223)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:131)
	at org.springframework.boot.context.event.EventPublishingRunListener.multicastInitialEvent(EventPublishingRunListener.java:136)
	at org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:81)
	at org.springframework.boot.SpringApplicationRunListeners.lambda$environmentPrepared$2(SpringApplicationRunListeners.java:64)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:118)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:112)
	at org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:63)
	at org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:356)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:307)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)
	at tech.robd.jwt.JwtAuthApplication.main(JwtAuthApplication.java:46)
Caused by: java.lang.IllegalStateException: Logback configuration error detected: 
ERROR in ch.qos.logback.core.model.processor.ImplicitModelHandler - Could not create component [filter] of type [ch.qos.logback.classic.filter.MarkerFilter] java.lang.ClassNotFoundException: ch.qos.logback.classic.filter.MarkerFilter
	at org.springframework.boot.logging.logback.LogbackLoggingSystem.reportConfigurationErrorsIfNecessary(LogbackLoggingSystem.java:260)
	at org.springframework.boot.logging.logback.LogbackLoggingSystem.loadConfiguration(LogbackLoggingSystem.java:247)
	at org.springframework.boot.logging.AbstractLoggingSystem.initializeWithSpecificConfig(AbstractLoggingSystem.java:66)
	at org.springframework.boot.logging.AbstractLoggingSystem.initialize(AbstractLoggingSystem.java:57)
	at org.springframework.boot.logging.logback.LogbackLoggingSystem.initialize(LogbackLoggingSystem.java:187)
	at org.springframework.boot.context.logging.LoggingApplicationListener.initializeSystem(LoggingApplicationListener.java:335)
	... 19 common frames omitted
2025-03-20 23:52:16 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - BEGIN SECURITY LOG - Now logging important security events.
2025-03-20 23:52:17 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: Generated random PIN  ("a6734") for domain: sandcastle-auth
2025-03-20 23:52:17 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: Generated random PIN  ("698ce") for domain: app1
2025-03-20 23:52:17 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: Generated random PIN  ("54dd8") for domain: default
2025-03-20 23:52:17 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: User PIN  ("08fdd") set from config for user: authadmin in domain: sandcastle-auth
2025-03-20 23:52:17 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: User PIN ("698ce") set by default from domain config for user: admin1 in domain: app1
2025-03-20 23:52:17 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: User PIN ("698ce") set by default from domain config for user: user1 in domain: app1
2025-03-20 23:52:17 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: User PIN ("698ce") set by default from domain config for user: user2 in domain: app1
2025-03-20 23:52:17 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: User PIN ("698ce") set by default from domain config for user: user3 in domain: app1
2025-03-20 23:52:18 WARN  t.r.jwt.service.DatabaseInitService -  SECURITY ALERT: User PIN ("698ce") set by default from domain config for user: manager1 in domain: app1
2025-03-20 23:55:41 INFO  tech.robd.jwt.JwtAuthApplication - Starting JwtAuthApplication using Java 21.0.3 with PID 12668 (C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 23:55:41 DEBUG tech.robd.jwt.JwtAuthApplication - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 23:55:41 INFO  tech.robd.jwt.JwtAuthApplication - The following 1 profile is active: "dev"
2025-03-20 23:55:42 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-03-20 23:55:42 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 95 ms. Found 6 JPA repository interfaces.
2025-03-20 23:55:43 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port(s): 18081 (http)
2025-03-20 23:55:43 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-18081"]
2025-03-20 23:55:43 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-03-20 23:55:43 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.11]
2025-03-20 23:55:43 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-03-20 23:55:43 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2096 ms
2025-03-20 23:55:43 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-03-20 23:55:43 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:jwt_auth user=SA
2025-03-20 23:55:43 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-03-20 23:55:43 INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:jwt_auth'
2025-03-20 23:55:43 INFO  tech.robd.jwt.util.JwtTokenUtil -  JWT secret key loaded successfully from config\jwt-key.txt
2025-03-20 23:55:43 DEBUG t.r.j.filter.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-03-20 23:55:43 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-03-20 23:55:43 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.2.6.Final
2025-03-20 23:55:43 INFO  org.hibernate.cfg.Environment - HHH000406: Using bytecode reflection optimizer
2025-03-20 23:55:44 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 23:55:44 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-03-20 23:55:44 INFO  o.h.b.i.BytecodeProviderInitiator - HHH000021: Bytecode provider name : bytebuddy
2025-03-20 23:55:45 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2025-03-20 23:55:45 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 23:55:45 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - BEGIN ERROR LOG
2025-03-20 23:55:45 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - BEGIN WARNING LOG
2025-03-20 23:55:45 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - BEGIN INFO LOG
2025-03-20 23:55:45 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - BEGIN DEBUG LOG
2025-03-20 23:55:46 INFO  t.r.jwt.service.DatabaseInitService -  Initializing database with domains, roles, and users from configuration
2025-03-20 23:55:46 INFO  t.r.jwt.service.DatabaseInitService -  Created new domain: sandcastle-auth
2025-03-20 23:55:46 INFO  t.r.jwt.service.DatabaseInitService -  Created new domain: app1
2025-03-20 23:55:46 INFO  t.r.jwt.service.DatabaseInitService -  Created new domain: default
2025-03-20 23:55:46 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: ADMIN in domain sandcastle-auth
2025-03-20 23:55:46 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: ADMIN in domain default
2025-03-20 23:55:46 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: ADMIN in domain app1
2025-03-20 23:55:46 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: USER in domain app1
2025-03-20 23:55:46 INFO  t.r.jwt.service.DatabaseInitService -  Created new role: MANAGER in domain app1
2025-03-20 23:55:46 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: authadmin in domain sandcastle-auth
2025-03-20 23:55:46 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: admin1 in domain app1
2025-03-20 23:55:46 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: user1 in domain app1
2025-03-20 23:55:46 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: user2 in domain app1
2025-03-20 23:55:46 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: user3 in domain app1
2025-03-20 23:55:47 INFO  t.r.jwt.service.DatabaseInitService -  Created new user: manager1 in domain app1
2025-03-20 23:55:47 INFO  t.r.jwt.service.DatabaseInitService -  Database initialization complete.
2025-03-20 23:55:47 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-03-20 23:55:47 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@50b010d4, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@510d4d4b, org.springframework.security.web.context.SecurityContextHolderFilter@3b45a3e6, org.springframework.security.web.header.HeaderWriterFilter@6a450cb5, org.springframework.security.web.authentication.logout.LogoutFilter@48dfce5c, tech.robd.jwt.filter.JwtAuthenticationFilter@5e9bf744, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@1ae37be2, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@283595db, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@747476f1, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@12f32f99, org.springframework.security.web.access.ExceptionTranslationFilter@1c0ec502, org.springframework.security.web.access.intercept.AuthorizationFilter@4fe687b5]
2025-03-20 23:55:48 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-18081"]
2025-03-20 23:55:48 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port(s): 18081 (http) with context path ''
2025-03-20 23:55:48 INFO  tech.robd.jwt.JwtAuthApplication - Started JwtAuthApplication in 8.97 seconds (process running for 11.908)
2025-03-20 23:56:18 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-03-20 23:56:18 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-03-20 23:56:18 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-03-20 23:59:27 INFO  t.r.j.controller.AuthControllerTest - Starting AuthControllerTest using Java 21.0.3 with PID 36848 (started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 23:59:27 DEBUG t.r.j.controller.AuthControllerTest - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 23:59:27 INFO  t.r.j.controller.AuthControllerTest - No active profile set, falling back to 1 default profile: "default"
2025-03-20 23:59:29 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - BEGIN ERROR LOG
2025-03-20 23:59:29 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - BEGIN WARNING LOG
2025-03-20 23:59:29 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - BEGIN INFO LOG
2025-03-20 23:59:29 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - BEGIN DEBUG LOG
2025-03-20 23:59:29 WARN  o.s.w.c.s.GenericWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'authController' defined in file [C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main\tech\robd\jwt\controller\AuthController.class]: Unsatisfied dependency expressed through constructor parameter 0: No qualifying bean of type 'tech.robd.jwt.service.UserService' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2025-03-20 23:59:29 INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-03-20 23:59:29 ERROR o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of constructor in tech.robd.jwt.controller.AuthController required a bean of type 'tech.robd.jwt.service.UserService' that could not be found.


Action:

Consider defining a bean of type 'tech.robd.jwt.service.UserService' in your configuration.

2025-03-20 23:59:29 ERROR o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [tech.robd.jwt.controller.AuthControllerTest@6518fdfd]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@3dc40ab9 testClass = tech.robd.jwt.controller.AuthControllerTest, locations = [], classes = [tech.robd.jwt.JwtAuthApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["app.username1.regex=^(user1|user2|user3)$", "app.username1.role=user", "app.username2.regex=^(admin1)$", "app.username2.role=admin", "app.passwordPrefix=", "app.passwordSuffix=pass", "org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@5553d0f5, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@9571f6a4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@1ac098f6, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@1021f6c9, [ImportsContextCustomizer@2db6d68d key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration, org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, org.springframework.boot.autoconfigure.task.TaskExecutionAutoConfiguration, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@5b444398, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@a776e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@53f535c6], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:143)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:241)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy1/jdk.proxy1.$Proxy4.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'authController' defined in file [C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main\tech\robd\jwt\controller\AuthController.class]: Unsatisfied dependency expressed through constructor parameter 0: No qualifying bean of type 'tech.robd.jwt.service.UserService' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:245)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1189)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:942)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:312)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1406)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:545)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:187)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:119)
	... 84 common frames omitted
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'tech.robd.jwt.service.UserService' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1824)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1383)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:888)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 108 common frames omitted
2025-03-20 23:59:30 INFO  t.r.j.controller.AuthControllerTest - Starting AuthControllerTest using Java 21.0.3 with PID 36848 (started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 23:59:30 DEBUG t.r.j.controller.AuthControllerTest - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 23:59:30 INFO  t.r.j.controller.AuthControllerTest - No active profile set, falling back to 1 default profile: "default"
2025-03-20 23:59:30 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - BEGIN ERROR LOG
2025-03-20 23:59:30 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - BEGIN WARNING LOG
2025-03-20 23:59:30 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - BEGIN INFO LOG
2025-03-20 23:59:30 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - BEGIN DEBUG LOG
2025-03-20 23:59:30 WARN  o.s.w.c.s.GenericWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'authController' defined in file [C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main\tech\robd\jwt\controller\AuthController.class]: Unsatisfied dependency expressed through constructor parameter 0: No qualifying bean of type 'tech.robd.jwt.service.UserService' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2025-03-20 23:59:30 INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-03-20 23:59:30 ERROR o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of constructor in tech.robd.jwt.controller.AuthController required a bean of type 'tech.robd.jwt.service.UserService' that could not be found.


Action:

Consider defining a bean of type 'tech.robd.jwt.service.UserService' in your configuration.

2025-03-20 23:59:30 ERROR o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [tech.robd.jwt.controller.AuthControllerTest@16a3cc88]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@3dc40ab9 testClass = tech.robd.jwt.controller.AuthControllerTest, locations = [], classes = [tech.robd.jwt.JwtAuthApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["app.username1.regex=^(user1|user2|user3)$", "app.username1.role=user", "app.username2.regex=^(admin1)$", "app.username2.role=admin", "app.passwordPrefix=", "app.passwordSuffix=pass", "org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@5553d0f5, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@9571f6a4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@1ac098f6, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@1021f6c9, [ImportsContextCustomizer@2db6d68d key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration, org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, org.springframework.boot.autoconfigure.task.TaskExecutionAutoConfiguration, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@5b444398, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@a776e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@53f535c6], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:143)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:241)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy1/jdk.proxy1.$Proxy4.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'authController' defined in file [C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main\tech\robd\jwt\controller\AuthController.class]: Unsatisfied dependency expressed through constructor parameter 0: No qualifying bean of type 'tech.robd.jwt.service.UserService' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:245)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1189)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:942)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:312)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1406)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:545)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:187)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:119)
	... 84 common frames omitted
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'tech.robd.jwt.service.UserService' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1824)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1383)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:888)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 108 common frames omitted
2025-03-20 23:59:30 INFO  t.r.j.controller.AuthControllerTest - Starting AuthControllerTest using Java 21.0.3 with PID 36848 (started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 23:59:30 DEBUG t.r.j.controller.AuthControllerTest - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 23:59:30 INFO  t.r.j.controller.AuthControllerTest - No active profile set, falling back to 1 default profile: "default"
2025-03-20 23:59:31 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - BEGIN ERROR LOG
2025-03-20 23:59:31 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - BEGIN WARNING LOG
2025-03-20 23:59:31 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - BEGIN INFO LOG
2025-03-20 23:59:31 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - BEGIN DEBUG LOG
2025-03-20 23:59:31 WARN  o.s.w.c.s.GenericWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'authController' defined in file [C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main\tech\robd\jwt\controller\AuthController.class]: Unsatisfied dependency expressed through constructor parameter 0: No qualifying bean of type 'tech.robd.jwt.service.UserService' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2025-03-20 23:59:31 INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-03-20 23:59:31 ERROR o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of constructor in tech.robd.jwt.controller.AuthController required a bean of type 'tech.robd.jwt.service.UserService' that could not be found.


Action:

Consider defining a bean of type 'tech.robd.jwt.service.UserService' in your configuration.

2025-03-20 23:59:31 ERROR o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [tech.robd.jwt.controller.AuthControllerTest@5403907]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@3dc40ab9 testClass = tech.robd.jwt.controller.AuthControllerTest, locations = [], classes = [tech.robd.jwt.JwtAuthApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["app.username1.regex=^(user1|user2|user3)$", "app.username1.role=user", "app.username2.regex=^(admin1)$", "app.username2.role=admin", "app.passwordPrefix=", "app.passwordSuffix=pass", "org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@5553d0f5, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@9571f6a4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@1ac098f6, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@1021f6c9, [ImportsContextCustomizer@2db6d68d key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration, org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, org.springframework.boot.autoconfigure.task.TaskExecutionAutoConfiguration, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@5b444398, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@a776e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@53f535c6], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:143)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:241)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy1/jdk.proxy1.$Proxy4.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'authController' defined in file [C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main\tech\robd\jwt\controller\AuthController.class]: Unsatisfied dependency expressed through constructor parameter 0: No qualifying bean of type 'tech.robd.jwt.service.UserService' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:245)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1189)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:942)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:312)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1406)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:545)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:187)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:119)
	... 84 common frames omitted
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'tech.robd.jwt.service.UserService' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1824)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1383)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:888)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 108 common frames omitted
2025-03-20 23:59:31 INFO  t.r.j.controller.AuthControllerTest - Starting AuthControllerTest using Java 21.0.3 with PID 36848 (started by robde in C:\data\work\myframework\simple-spring-jwt-auth)
2025-03-20 23:59:31 DEBUG t.r.j.controller.AuthControllerTest - Running with Spring Boot v3.1.2, Spring v6.0.11
2025-03-20 23:59:31 INFO  t.r.j.controller.AuthControllerTest - No active profile set, falling back to 1 default profile: "default"
2025-03-20 23:59:32 ERROR t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - BEGIN ERROR LOG
2025-03-20 23:59:32 WARN  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - BEGIN WARNING LOG
2025-03-20 23:59:32 INFO  t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - BEGIN INFO LOG
2025-03-20 23:59:32 DEBUG t.r.j.JwtAuthApplication$$SpringCGLIB$$0 - BEGIN DEBUG LOG
2025-03-20 23:59:32 WARN  o.s.w.c.s.GenericWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'authController' defined in file [C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main\tech\robd\jwt\controller\AuthController.class]: Unsatisfied dependency expressed through constructor parameter 0: No qualifying bean of type 'tech.robd.jwt.service.UserService' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
2025-03-20 23:59:32 INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-03-20 23:59:32 ERROR o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Parameter 0 of constructor in tech.robd.jwt.controller.AuthController required a bean of type 'tech.robd.jwt.service.UserService' that could not be found.


Action:

Consider defining a bean of type 'tech.robd.jwt.service.UserService' in your configuration.

2025-03-20 23:59:32 ERROR o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [tech.robd.jwt.controller.AuthControllerTest@58164e9a]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@3dc40ab9 testClass = tech.robd.jwt.controller.AuthControllerTest, locations = [], classes = [tech.robd.jwt.JwtAuthApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["app.username1.regex=^(user1|user2|user3)$", "app.username1.role=user", "app.username2.regex=^(admin1)$", "app.username2.role=admin", "app.passwordPrefix=", "app.passwordSuffix=pass", "org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTestContextBootstrapper=true"], contextCustomizers = [org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@5553d0f5, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@9571f6a4, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@1ac098f6, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@1021f6c9, [ImportsContextCustomizer@2db6d68d key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration, org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration, org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration, org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration, org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration, org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration, org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration, org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration, org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration, org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration, org.springframework.boot.autoconfigure.task.TaskExecutionAutoConfiguration, org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration, org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration, org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@5b444398, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@a776e, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@53f535c6], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:143)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:241)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:124)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:99)
	at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:94)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:63)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:92)
	at jdk.proxy1/jdk.proxy1.$Proxy4.stop(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:200)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:132)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:103)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:63)
	at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:121)
	at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:71)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)
	at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'authController' defined in file [C:\data\work\myframework\simple-spring-jwt-auth\build\classes\java\main\tech\robd\jwt\controller\AuthController.class]: Unsatisfied dependency expressed through constructor parameter 0: No qualifying bean of type 'tech.robd.jwt.service.UserService' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:245)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1352)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1189)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:942)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:312)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1406)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:545)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:187)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:119)
	... 84 common frames omitted
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'tech.robd.jwt.service.UserService' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1824)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1383)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:888)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 108 common frames omitted
